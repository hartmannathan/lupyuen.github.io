<!doctype html>
<html lang="en">

<head>
  <link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
  <link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
  <link rel="canonical" href="https://lupyuen.org/articles/build-and-flash-rust-mynewt-firmware-for-pinetime-smart-watch.html" />
  <!-- End Wayback Rewrite JS Include -->
  <title data-rh="true">Build and Flash Rust+Mynewt Firmware for PineTime Smart Watch</title>
  <meta data-rh="true" charset="utf-8" />
  <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
  <meta data-rh="true" name="theme-color" content="#000000" />
  <meta data-rh="true" property="og:type" content="article" />
  <meta data-rh="true" property="article:published_time" content="2020-03-05T04:58:23.398Z" />
  <meta data-rh="true" name="title" content="Build and Flash Rust+Mynewt Firmware for PineTime Smart Watch" />
  <meta data-rh="true" property="og:title" content="Build and Flash Rust+Mynewt Firmware for PineTime Smart Watch" />
  <meta data-rh="true" property="twitter:title"
    content="Build and Flash Rust+Mynewt Firmware for PineTime Smart Watch" />
  <meta data-rh="true" name="description"
    content="Welcome to the World of Modern IoT Gadgets! If you’re used to old-school IoT gadgets like Arduino Uno that are underpowered and have no networking and display… PineTime Smart Watch will surprise you…" />
  <meta data-rh="true" property="og:description"
    content="All you need is a Raspberry Pi and a Windows or macOS computer!" />
  <meta data-rh="true" property="twitter:description"
    content="All you need is a Raspberry Pi and a Windows or macOS computer!" />
  <meta data-rh="true" name="twitter:card" content="summary_large_image" />
  <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
  <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
  <meta data-rh="true" name="robots" content="index,follow" />
  <meta data-rh="true" name="referrer" content="unsafe-url" />
  <meta data-rh="true" name="twitter:label1" value="Reading time" />
  <meta data-rh="true" name="twitter:data1" value="14 min read" />
  <meta property="og:image" 
  content="https://lupyuen.github.io/images/legacy/e1.jpeg">
  
<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">

<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
    a {
        color: #77d;
    }
</style>
<!-- End scripts/rustdoc-header.html -->

</head>

<body>

  <div id="root">
    <div class="a b c">
      <article>
        <section class="cl cm cn co ai cp cq r"></section><span class="r"></span>
        <div>
          <div class="s u cr cs ct cu"></div>
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <div>
                  <h1 id="2455" class="db dc ap cd dd b de df dg dh di dj dk dl dm dn do dp dq dr ds dt">Build and Flash
                    Rust+Mynewt Firmware for PineTime Smart Watch</h1>
                  <div class="du">
                    <div class="n dv dw dx dy">
                      <div class="o n">
                        <div><a rel="noopener"
                            href="https://lupyuen.github.io">
                            <div class="dz ea eb">
                              <div class="bf n ec o p s ed ee ef eg eh cu"></div>
                              
                            </div>
                          </a></div>
                        <div class="ej ai r">
                          <div class="n">
                            <div style="flex:1"><span class="cc b cd ce cf cg r ap q">
                                <div class="ek n o el"><span class="cc em en ce av eo ep as at au ap"><a
                                      class="bw bx bg bh bi bj bk bl bm bn eq bq ca cb" rel="noopener"
                                      href="https://lupyuen.github.io">Lup
                                      Yuen Lee 李立源</a></span>
                                  <div class="er r bv h">
                                  </div>
                                </div>
                              </span></div>
                          </div><span class="cc b cd ce cf cg r ch ci"><span class="cc em en ce av eo ep as at au ch">
                              <div><a class="bw bx bg bh bi bj bk bl bm bn eq bq ca cb" rel="noopener"
                                  href="https://lupyuen.github.io">
                                  7 Jan 2020</a> <!-- -->·
                                <!-- -->
                                <!-- -->14
                                <!-- --> min read
                              </div>
                            </span></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <p id="e62d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">All you need is a Raspberry Pi and a Windows or macOS computer!</em></p>

<p>
  UPDATE: This code in this article has been archived in the <a href="https://github.com/lupyuen/pinetime-rust-mynewt/tree/pre-lvgl">pre-lvgl</a> branch of pinetime-rust-mynewt. 
  The pinetime-rust-mynewt firmware has been revamped to support <a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/watchface">Rust Watch Faces on LVGL</a>. 
  <a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/watchface">Check out the updates  </a>
</p>

                <p id="41fe" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Welcome to the
                  World of Modern IoT Gadgets! If you’re used to old-school IoT gadgets like Arduino Uno that are
                  underpowered and have no networking and display… <a class="bw fk gq gr gs gt" target="_blank"
                    rel="noopener"
                    href="https://lupyuen.github.io/articles/sneak-peek-of-pinetime-smart-watch-and-why-its-perfect-for-teaching-iot">PineTime
                    Smart Watch</a> will surprise you! <em class="gp">(</em><a
                    href="https://store.pine64.org/?product=pinetime-dev-kit"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">Check out the
                      Pine64 Store</em></a><em class="gp">)</em></p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e1.jpeg" /></p>

                    <p><em>Raspberry Pi connected to PineTime
                    </em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="26bd" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">PineTime is
                  powered by a <a
                    href="https://infocenter.nordicsemi.com/pdf/nRF52832_PS_v1.0.pdf"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if">Nordic nRF52
                      Microcontroller</strong></a> with an <strong class="fy if">Arm Cortex-M4F CPU</strong>… The same
                  microcontroller found in a <a
                    href="https://blog.bolt.io/logitech-mx-master-3-vs-2s/"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">high-end gaming mouse</a>!</p>
                <p id="ef79" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">With built-in
                  colour touchscreen and Bluetooth networking, embedded programming on PineTime becomes really fun and
                  exciting.</p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e2.jpeg" /></p>


                    <p><em>Raspberry Pi used for flashing the PineTime
                      firmware</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="96f6" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">PineTime is a
                  prime example of a real-world, off-the-shelf gadget that’s <strong class="fy if">powerful and yet
                    affordable</strong>, because it’s manufactured in huge quantities. But they can be intimidating to
                  newbies who have not programmed such commercial devices.</p>
                <p id="759a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Today I’ll show
                  you that programming a PineTime is not that hard… <em class="gp">All you need is a Raspberry Pi, some
                    wires and a little creativity!</em></p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e3.jpeg" /></p>


                    <p><em>Another view of the improvised Raspberry Pi
                      connection to PineTime</em></p>
                  
                </div>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="3a6c" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">Connect PineTime to Raspberry
                  Pi</h1>
                <p id="c65c" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv"><strong
                    class="fy if"><em class="gp">Note: This section is obsolete. Please refer to the updated
                      instructions here: </em></strong><a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/README.md"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if"><em
                        class="gp">https://github.com/lupyuen/visual-embedded-rust/blob/master/README.md</em></strong></a>
                </p>
                <p id="c58b" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">1️⃣ Carefully
                  pry open the PineTime casing. Use tweezers to pivot the shiny battery gently to the side. <em
                    class="gp">Be careful not to break the red and black wires that connect the battery to the
                    watch!</em></p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e4.jpeg" /></p>


                    <p><em>Be careful not to break the red and black
                      wires (lower left) that connect the battery to the watch</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="9165" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">2️⃣ Just above
                  the battery we see 4 shiny rings. This is the <a
                    href="https://en.wikipedia.org/wiki/JTAG#Serial_Wire_Debug"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if">Serial Wire
                      Debug</strong></a><strong class="fy if"> (SWD) Port</strong> for PineTime. We’ll use this port to
                  flash our firmware to PineTime. The 4 pins (from left to right) are <code
                    class="hu jn jo jp jq b">SWDIO</code> (Data I/O), <code class="hu jn jo jp jq b">SWDCLK</code>
                  (Clock), <code class="hu jn jo jp jq b">3.3V</code>, <code class="hu jn jo jp jq b">GND</code>.</p>
                <p id="f05e" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">🛈<em
                    class="gp"> </em><a
                    href="https://gist.github.com/lupyuen/41fffaddade277d27c48697bca21d837"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">What is “flash
                      memory” / “flashing” / “firmware”? Read this</em></a></p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e5.jpeg" /></p>


                    <p><em>SWD Port at top left: SWDIO, SWDCLK, 3.3V
                      and GND. 5V battery charging pad at lower right. Bent antenna wire is at top centre.</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="c31b" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">The exposed
                  copper wire at the top centre of the photo is the Bluetooth antenna. Bend it upwards so that it
                  doesn’t come into contact with anything.</p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e6.png" /></p>


                    <p><em>Bending the Bluetooth Antenna so that it
                      doesn’t touch anything</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="36bb" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">3️⃣ At lower
                  right we see a pad marked <code class="hu jn jo jp jq b">5V</code>. We’ll connect this pad to
                  Raspberry Pi to charge the battery. If charging of the battery is not needed during development, we
                  may leave<code class="hu jn jo jp jq b">5V</code> disconnected.</p>
                <p id="cdb5" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">4️⃣ Connect the
                  SWD Port and the 5V Pad (optional) to the Raspberry Pi with <a
                    href="https://www.adafruit.com/product/288"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if">Solid-Core
                      Wire (22 AWG)</strong></a> and <a
                    href="https://www.adafruit.com/product/1951"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong
                      class="fy if">Female-To-Female Jumper Cables</strong></a>…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/6913bcd5ff5a5d67698f8bac0d84599b.js"></script></p>

                
                <p id="870c" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Some have
                  reported that the <a
                    href="https://appleinsider.com/articles/10/08/17/liquidmetal_created_sim_ejector_tool_for_apples_iphone_ipad"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if">SIM Ejector
                      Tool</strong></a> from our phones will also fit perfectly into PineTime’s SWD holes. (Or file the
                  pin down until it fits)</p>
                <p id="0e7b" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">5️⃣ We may use
                  Raspberry Pi Zero, 1, 2, 3 or 4 . The pins on Raspberry Pi to be connected are…</p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e7.png" /></p>


                  <p><em>Connecting Raspberry Pi’s SPI port to
                    PineTime. Based on <a href="https://pinout.xyz/"
                      class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">https://pinout.xyz/</a>
                  </em></p>
                
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e8.jpeg" /></p>


                    <p><em>Raspberry Pi’s SPI port connected to
                      PineTime. 5V may be disconnected if battery charging is not needed.</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="d582" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">6️⃣ The
                  PineTime touchscreen needs to be accessible during development, so I mounted PineTime on a <a
                    href="https://www.daisojapan.com/p-30955-clear-box-28-x-47-x-19-x-in-12pks.aspx"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">$2 clear box cover from Daiso</a>
                  with Blu Tack and sticky tape.</p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e9.jpeg" /></p>


                    <p><em>PineTime and Raspberry Pi mounted on a clear
                      box cover</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="2c09" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">Be Creative! And </em><a
                    href="https://twitter.com/MisterTechBlog"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">send me</em></a><em
                    class="gp"> photos of your PineTime setup…</em></p>
                <p id="7de4" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if">UPDATE</strong>: <a
                    href="https://www.reddit.com/r/PINE64official/comments/elk90l/build_and_flash_rustmynewt_firmware_for_pinetime/"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">Check this Reddit Thread for a
                    super-cool Raspberry Pi Zero setup!</a></p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e10.jpeg" /></p>


                    <p><em>Here’s a tip: Colour the Raspberry Pi pins
                      with a marker (one side only) so that we remember which pin to use</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e11.jpeg" /></p>


                  <p><em>Why didn’t I use the SWD cable that was
                    shipped with PineTime? Because the wires were too thin and may lose contact with the SWD connector.
                    Compare that with the Solid Core 22 AWG wire (green), which fits nicely. Also note that the SWD
                    cable is shipped with random colours.</em></p>
                
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="492b" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">Remove PineTime Flash
                  Protection</h1>
                <p id="4020" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv"><strong
                    class="fy if"><em class="gp">Note: This section is obsolete. Please refer to the updated
                      instructions here: </em></strong><a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/README.md"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if"><em
                        class="gp">https://github.com/lupyuen/visual-embedded-rust/blob/master/README.md</em></strong></a>
                </p>
                <p id="4b8f" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">PineTime is
                  shipped with preloaded demo firmware. We need to erase the demo firmware and unprotect PineTime’s
                  flash memory so that we may flash our own firmware.</p>
                <p id="15f7" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">🛈 <a
                    href="https://gist.github.com/lupyuen/3ee440542853e1e637582c4efa1b240a"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">What is “flash
                      protection”? Read this</em></a></p>
                <p id="a86a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">1️⃣ Power on
                  the Raspberry Pi. Open a command prompt and enter the following…</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="d888" class="kj iv ap cd jq b en kk kl r km">sudo raspi-config</span></pre>
                <p id="0dd4" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Select <code
                    class="hu jn jo jp jq b">Interfacing Options → SPI → Yes</code></p>
                <p id="e9a5" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Select <code
                    class="hu jn jo jp jq b">Finish</code></p>
                <p id="1262" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">At the command
                  prompt, enter the following…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/9f2c04f7891a2119f55d63168685b7bd.js"></script></p>

                
                <p id="7849" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">2️⃣ At the
                  <code class="hu jn jo jp jq b">Welcome to Rust!</code> prompt, press Enter to select the default
                  option:<br /><code class="hu jn jo jp jq b">1) Proceed with installation (default)</code></p>
                <p id="dcba" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">If you see this
                  error…</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="053f" class="kj iv ap cd jq b en kk kl r km">Cloning into &#x27;openocd-spi/jimtcl&#x27;...<br/>fatal: unable to access &#x27;<a href="http://repo.or.cz/r/jimtcl.git/'" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">http://repo.or.cz/r/jimtcl.git/&#x27;</a>: Recv failure: Connection reset by peer<br/>fatal: clone of &#x27;<a href="http://repo.or.cz/r/jimtcl.git'" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">http://repo.or.cz/r/jimtcl.git&#x27;</a> into submodule path &#x27;/private/tmp/aa/openocd-spi/jimtcl&#x27; failed</span></pre>
                <p id="8ba3" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">It means that
                  the sub-repository for one of the dependencies <code class="hu jn jo jp jq b">jimtcl</code> is
                  temporarily down. You may download the pre-built <code class="hu jn jo jp jq b">openocd-spi</code>
                  binaries <a
                    href="https://github.com/lupyuen/pinetime-rust-mynewt/releases/download/openocd-spi2/openocd-spi.7z"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">from this link</a>. Then copy the
                  executable <code class="hu jn jo jp jq b">openocd-spi/src/openocd</code> to <code
                    class="hu jn jo jp jq b">pinetime-rust-mynewt/openocd/bin/openocd</code></p>
                <p id="4882" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">3️⃣ When the
                  installation has completed, enter the following at the command prompt…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/f4e4bbbbf2fee6362f0a6ded872779f1.js"></script></p>

                
                <p id="86c0" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">4️⃣ We should
                  see <code class="hu jn jo jp jq b">Shut Down And Power Off Your Raspberry Pi</code>…</p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e12.png" /></p>


                
                <p id="46c5" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">If you see
                  <code class="hu jn jo jp jq b">Clock Speed</code> and nothing else after that…</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="404f" class="kj iv ap cd jq b en kk kl r km">Info : BCM2835 SPI SWD driver<br/>Info : SWD only mode enabled<br/>Info : clock speed 31200 kHz</span></pre>
                <p id="fc38" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Then the
                  connection to the SWD Port is probably loose, check the pins. Also enter <code
                    class="hu jn jo jp jq b">sudo raspi-config</code> and confirm that the SPI port has been enabled.
                </p>
                <p id="2865" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">If you see this
                  instead…</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="d326" class="kj iv ap cd jq b en kk kl r km">openocd/bin/openocd: cannot execute binary file: Exec format error</span></pre>
                <p id="10a2" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Then <code
                    class="hu jn jo jp jq b">install-pi.sh</code> probably didn’t run correctly. To fix this, copy the
                  <code class="hu jn jo jp jq b">openocd</code> executable like this…</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="bdab" class="kj iv ap cd jq b en kk kl r km">cp $HOME/openocd-spi/src/openocd $HOME/pinetime-rust-mynewt/openocd/bin/openocd</span></pre>
                <p id="daae" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">5️⃣ Shut down
                  and power off your Raspberry Pi. Wait 30 seconds for the red and green LEDs on your Pi to turn off.
                  Power on your Pi. Enter the same commands at a command prompt…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/f4e4bbbbf2fee6362f0a6ded872779f1.js"></script></p>

                
                <p id="b463" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">6️⃣ We should
                  see <code class="hu jn jo jp jq b">Flash Is Already Unprotected</code>…</p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e13.png" /></p>


                
                <p id="c986" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">PineTime’s demo
                  firmware has been erased and the flash protection has been removed.</p>
                <p id="78a9" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">🛈 <a
                    href="https://gist.github.com/lupyuen/18e66c3e81e11050a10d1192c5b84bb0"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">What is OpenOCD?
                      Why Raspberry Pi and not ROCK64 or Nvidia Jetson Nano? Read this</em></a></p>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="bbdb" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">Flash Bootloader and
                  Application to PineTime</h1>
                <p id="6019" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv">We’re now ready
                  to flash our own firmware to PineTime! We’ll be flashing the PineTime firmware that’s based on
                  open-source <a href="https://mynewt.apache.org/"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if">Apache
                      Mynewt embedded operating system</strong></a>. Mynewt OS contains two components that we shall
                  flash to PineTime…</p>
                <p id="0670" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if">Mynewt Bootloader</strong>: This is the C code that’s run whenever we power on
                  PineTime. The Bootloader executes the <strong class="fy if">Mynewt Application</strong> upon startup.
                </p>
                <p id="7be7" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if">Mynewt Application</strong>: Contains a <strong class="fy if">Rust
                    application</strong> that controls the PineTime functions, and low-level system functions written in
                  C.</p>
                <p id="c317" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">The Bootloader
                  and Application firmware image files may be found at these locations…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/99d64ec2bf5bc2e470d3c5a8a020b8e9.js"></script></p>

                  <p><em>From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/hw/bsp/nrf52/bsp.yml"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/hw/bsp/nrf52/bsp.yml</a>
                  </em></p>
                
                <p id="c32f" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">🛈 <a
                    href="https://gist.github.com/lupyuen/93ba71e0ae5e746e7a68e4513e0a54d8"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">What is a
                      Bootloader? Read this</em></a></p>
                <p id="9f90" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">1️⃣ To flash
                  Mynewt Bootloader to PineTime, enter the following at the command prompt…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/611fa4f2b417d206346407d590ffc0d3.js"></script></p>

                  <p><em>Commands to flash Mynewt Bootloader to
                    PineTime</em></p>
                
                <p id="0268" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">2️⃣ We should
                  see <code class="hu jn jo jp jq b">Done</code>…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/a23945b603d65963a90e90bf26db5da0.js"></script></p>

                  <p><em>Log of Mynewt Bootloader flashing. From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-bootloader-pi.log"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-bootloader-pi.log</a>
                  </em></p>
                
                <p id="0d27" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">3️⃣ To flash
                  Mynewt Application to PineTime, enter the following at the command prompt…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/7f466ec8dc83d01ddad25ad5ba81a17d.js"></script></p>

                  <p><em>Commands to flash Mynewt Application to
                    PineTime</em></p>
                
                <p id="92e5" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">4️⃣ We should
                  see <code class="hu jn jo jp jq b">Done! Press Ctrl-C To Exit</code>…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/35bda5aed106d2ecd1627a409d0058ac.js"></script></p>

                  <p><em>Log of Mynewt Application flashing. From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-application-pi.log"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-application-pi.log</a>
                  </em></p>
                
                <p id="2515" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">5️⃣ The new
                  PineTime firmware runs after the flashing has been completed. Here are the debugging messages produced
                  by our Rust application…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/3e888ba4cde37d65901c917361890547.js"></script></p>

                  <p><em>Log of Mynewt Application executing. From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-application-pi.log"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-application-pi.log</a>
                  </em></p>
                
                <p id="fd8a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">6️⃣ And we
                  should see on the PineTime screen…</p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e14.jpeg" /></p>


                  <p><em>Our Rust Application rendering graphics and
                    text to the PineTime display</em></p>
                
                <p id="5959" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">7️⃣ Press <code
                    class="hu jn jo jp jq b">Ctrl-C</code> to stop the display of debugging messages.</p>
                <p id="9b50" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">We have flashed
                  a simple Rust application located at <code
                    class="hu jn jo jp jq b"><a href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/display.rs" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">pinetime-rust-mynewt/rust/app/src/display.rs</a></code>
                  that renders some graphics and text to the PineTime display…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/dba36191b09c4d7ec6b71db2207d1dfe.js"></script></p>

                  <p><em>Our Rust application that renders graphics and
                    text. From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/display.rs"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/display.rs</a>
                  </em></p>
                
                <p id="3f5d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><a
                    href="https://doc.rust-lang.org/book/title-page.html"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">Here’s a good
                      introduction to Rust programming</em></a><em class="gp"> and </em><a
                    href="https://doc.rust-lang.org/rust-by-example/"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">here’s a good
                      overview of Rust</em></a></p>
                <p id="86b6" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">The Rust
                  application references the Rust library (crate) named [<a
                    href="https://docs.rs/embedded-graphics/0.6.0-alpha.2/embedded_graphics/"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">embedded_graphics</a>]. That’s
                  where <code
                    class="hu jn jo jp jq b"><a href="https://docs.rs/embedded-graphics/0.6.0-alpha.2/embedded_graphics/primitives/rectangle/struct.Rectangle.html" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">Rectangle</a></code>,
                  <code
                    class="hu jn jo jp jq b"><a href="https://docs.rs/embedded-graphics/0.6.0-alpha.2/embedded_graphics/primitives/circle/struct.Circle.html" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">Circle</a></code>,
                  <code
                    class="hu jn jo jp jq b"><a href="https://docs.rs/embedded-graphics/0.6.0-alpha.2/embedded_graphics/fonts/index.html#types" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">fonts</a></code>,
                  … are defined.</p>
                <p id="4b96" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">How do we modify this Rust application and rebuild the firmware? </em>We have 3 options:
                </p>
                <p id="107f" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if">[Option 1]</strong> Build the firmware on a Windows computer, and copy to Pi for
                  flashing</p>
                <p id="7e28" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if">[Option 2]</strong> Build the firmware on a macOS computer, and copy to Pi for
                  flashing</p>
                <p id="507a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if">[Option 3]</strong> Build the firmware on a (powerful) Raspberry Pi (or PineBook Pro)
                  and flash directly</p>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="2f03" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">[Option 1] Install PineTime
                  Build Tools on Windows</h1>
                <p id="0639" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv"><strong
                    class="fy if"><em class="gp">(If you’re building firmware on macOS, skip to the next section. If
                      you’re building firmware on Raspberry Pi, skip to the section “[Option 3] Install Build Tools on
                      Raspberry Pi”)</em></strong></p>
                <p id="d555" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">To build your
                  own firmware on a Windows computer, follow these instructions to install the build tools for Rust and
                  Mynewt OS on Windows…</p>
                <p id="4fc0" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">1️⃣ Download
                  the <code class="hu jn jo jp jq b">pinetime-rust-mynewt.7z</code> file attached below…<code
                    class="hu jn jo jp jq b"><a href="https://github.com/lupyuen/pinetime-rust-mynewt/releases/tag/v2.0.4" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">github.com/lupyuen/pinetime-rust-mynewt/releases/tag/v2.0.4</a></code>
                </p>
                <p id="c8e0" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Expand the
                  <code class="hu jn jo jp jq b">.7z</code> file with 7zip…<br /><code
                    class="hu jn jo jp jq b"><a href="https://www.7-zip.org/download.html" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">www.7-zip.org/download.html</a></code>
                </p>
                <p id="2f90" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">2️⃣ Click here
                  to install <strong class="fy if">Build Tools For Visual Studio 2019</strong>:<br /><code
                    class="hu jn jo jp jq b"><a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019</a></code>
                </p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e15.png" /></p>


                  <p><em>Build Tools For Visual Studio 2019
                  </em></p>
                
                <p id="16fe" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Click the <code
                    class="hu jn jo jp jq b">Individual Components</code> tab</p>
                <p id="497c" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Select the
                  following components:</p>
                <ol class="">
                  <li id="908d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go ku kv kw"><code
                      class="hu jn jo jp jq b">Windows 10 SDK (10.0.18362.0)</code></li>
                  <li id="4c8b" class="fw fx ap cd fy b fz kx gb gc ky ge gf kz gh gi la gk gl lb gn go ku kv kw"><code
                      class="hu jn jo jp jq b">C++ CMake Tools for Windows</code></li>
                  <li id="7121" class="fw fx ap cd fy b fz kx gb gc ky ge gf kz gh gi la gk gl lb gn go ku kv kw">(This
                    should be automatically selected) <code
                      class="hu jn jo jp jq b">MSVC v142 — VS 2019 C++ x64/x86 Build Tools</code></li>
                </ol>
                <p id="ba04" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">3️⃣ Install
                  <code class="hu jn jo jp jq b">rustup</code> according to the instructions here:<br /><code
                    class="hu jn jo jp jq b"><a href="https://rustup.rs/" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">rustup.rs</a></code>
                </p>
                <p id="8a6b" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Click the link
                  provided to download <code class="hu jn jo jp jq b">rustup‑init.exe</code></p>
                <p id="f41f" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Launch the
                  downloaded file <code class="hu jn jo jp jq b">rustup‑init.exe</code></p>
                <p id="e5fd" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">If you see the
                  message “<code
                    class="hu jn jo jp jq b">Windows Defender SmartScreen prevented an unrecognised app from starting</code>”…
                </p>
                <p id="1dfa" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Click <code
                    class="hu jn jo jp jq b">More Info</code></p>
                <p id="8b8d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Click <code
                    class="hu jn jo jp jq b">Run Anyway</code></p>
                <p id="649d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">At the <code
                    class="hu jn jo jp jq b">Welcome to Rust!</code> prompt, press Enter to select the default
                  option:<br /><code class="hu jn jo jp jq b">1) Proceed with installation (default)</code></p>
                <p id="75be" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">4️⃣ Open the
                  Command Prompt and enter…</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="63d2" class="kj iv ap cd jq b en kk kl r km"># Install Rust build tools for Arm Cortex<br/>rustup default nightly<br/>rustup update<br/>rustup target add thumbv7em-none-eabihf</span></pre>
                <p id="d668" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">5️⃣ Install <a
                    href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">GNU Arm Embedded Toolchain</a> for
                  Windows from Arm Developer Website…<br /><code
                    class="hu jn jo jp jq b"><a href="https://developer.arm.com/-/media/Files/downloads/gnu-rm/8-2019q3/RC1.1/gcc-arm-none-eabi-8-2019-q3-update-win32-sha1.exe?revision=fcadabed-d946-49dc-8f78-0732d2f43773?product=GNU%20Arm%20Embedded%20Toolchain,32-bit,,Windows,8-2019-q3-update" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">gcc-arm-none-eabi-8-2019-q3-update-win32-sha1.exe</a></code>
                </p>
                <p id="6e31" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Select this
                  option at the last install step:<br /><code
                    class="hu jn jo jp jq b">&quot;Add path to environment variable&quot;</code></p>
                <p id="1ddd" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">6️⃣ Install
                  VSCode…<br /><code
                    class="hu jn jo jp jq b"><a href="https://code.visualstudio.com/" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">code.visualstudio.com</a></code>
                </p>
                <p id="4932" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">🛈 <a
                    href="https://gist.github.com/lupyuen/08e383845d68d3337747e8eb59d0f624"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">What is VSCode? Is
                      it related to Visual Studio? How is Microsoft involved? Read this</em></a></p>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="ff06" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">[Option 2] Install PineTime
                  Build Tools on macOS</h1>
                <p id="998e" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv"><strong
                    class="fy if"><em class="gp">(If you’re building firmware on Windows, skip to the section “Build
                      PineTime Firmware”)</em></strong></p>
                <p id="4f72" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">To build your
                  own firmware on a macOS computer, follow these instructions to install the build tools for Rust and
                  Mynewt OS on macOS…</p>
                <p id="3716" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">1️⃣ Download
                  the <code class="hu jn jo jp jq b">pinetime-rust-mynewt.7z</code> file attached below…<code
                    class="hu jn jo jp jq b"><a href="https://github.com/lupyuen/pinetime-rust-mynewt/releases/tag/v2.0.5" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">github.com/lupyuen/pinetime-rust-mynewt/releases/tag/v2.0.5</a></code>
                </p>
                <p id="b3de" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Expand the
                  <code class="hu jn jo jp jq b">.7z</code> file with Keka…<br /><code
                    class="hu jn jo jp jq b"><a href="https://www.keka.io/en/" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">www.keka.io/en/</a></code>
                </p>
                <p id="8e26" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">2️⃣ Install
                  <code class="hu jn jo jp jq b">rustup</code> according to the instructions here:<br /><code
                    class="hu jn jo jp jq b"><a href="https://rustup.rs/" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">rustup.rs</a></code>
                </p>
                <p id="b95d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">At the <code
                    class="hu jn jo jp jq b">Welcome to Rust!</code> prompt, press Enter to select the default
                  option:<br /><code class="hu jn jo jp jq b">1) Proceed with installation (default)</code></p>
                <p id="87be" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">3️⃣ Open the
                  Command Prompt and enter…</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="77bc" class="kj iv ap cd jq b en kk kl r km"># Install Rust build tools for Arm Cortex<br/>source $HOME/.cargo/env<br/>rustup default nightly<br/>rustup update<br/>rustup target add thumbv7em-none-eabihf</span><span id="a746" class="kj iv ap cd jq b en lc ld le lf lg kl r km"># Install Go and newt (build tool for Mynewt OS)<br/>cd pinetime-rust-mynewt<br/>scripts/install-mac.sh</span></pre>
                <p id="f515" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">In case of problems, compare with </em><a
                    href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/install-mac.log"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">this installation
                      log</em></a></p>
                <p id="a998" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">5️⃣ Install <a
                    href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">GNU Arm Embedded Toolchain</a> for
                  macOS from Arm Developer Website…<br /><code
                    class="hu jn jo jp jq b"><a href="https://developer.arm.com/-/media/Files/downloads/gnu-rm/8-2019q3/RC1.1/gcc-arm-none-eabi-8-2019-q3-update-mac.tar.bz2?revision=6a06dd2b-bb98-4708-adac-f4c630c33f4f?product=GNU%20Arm%20Embedded%20Toolchain,64-bit,,Mac%20OS%20X,8-2019-q3-update" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">gcc-arm-none-eabi-8-2019-q3-update-mac.tar.bz2</a></code>
                </p>
                <p id="3230" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Expand the
                  <code class="hu jn jo jp jq b">.tar.bz2</code> compressed file with Keka.</p>
                <p id="dc62" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Add the
                  uncompressed <code class="hu jn jo jp jq b">bin</code> folder to your <code
                    class="hu jn jo jp jq b">PATH</code> environment variable in your <code
                    class="hu jn jo jp jq b">~/.profile</code> and <code class="hu jn jo jp jq b">~/.bashrc</code>
                  files, like this:</p>
                <pre
                  class="he hf hg hh hi kg kh ki"><span id="7a71" class="kj iv ap cd jq b en kk kl r km">export PATH=”/Users/MYUSERNAME/gcc-arm-none-eabi-8–2019-q3-update/bin:$PATH”</span></pre>
                <p id="79b2" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">6️⃣ Install
                  VSCode…<br /><code
                    class="hu jn jo jp jq b"><a href="https://code.visualstudio.com/" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">code.visualstudio.com</a></code>
                </p>
                <p id="7f7a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">🛈 <a
                    href="https://gist.github.com/lupyuen/08e383845d68d3337747e8eb59d0f624"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">What is VSCode? Is
                      it related to Visual Studio? How is Microsoft involved? Read this</em></a></p>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="f4ce" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">[Option 3] Install PineTime
                  Build Tools on Raspberry Pi</h1>
                <p id="3790" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv"><strong
                    class="fy if"><em class="gp">(If you’re building firmware on Windows or macOS, skip this
                      section)</em></strong></p>
                <p id="381c" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">The PineTime
                  Build Tools are already installed on our Raspberry Pi when we executed <code
                    class="hu jn jo jp jq b">install-pi.sh</code> earlier.</p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e16.png" /></p>


                  <p><em>Launching VSCode on Raspberry Pi</em></p>
                
                <p id="f0ab" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Launch VSCode
                  by clicking the <strong class="fy if">Raspberry Pi Menu </strong>(top left corner)<strong
                    class="fy if"> → Programming → Code OSS Headmelted</strong></p>
                <p id="9623" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">🛈 <a
                    href="https://gist.github.com/lupyuen/08e383845d68d3337747e8eb59d0f624"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">What is VSCode? Is
                      it related to Visual Studio? How is Microsoft involved? Read this</em></a></p>
              </div>
            </div>
            <div class="gu ai">
              

                <p><img src="https://lupyuen.github.io/images/legacy/e17.jpeg" /></p>


                <p><em>Building PineTime Firmware on Raspberry Pi 4
                  with VSCode. Displayed on Xiaomi 65-inch 4K TV.</em></p>
              
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="826a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if"><em class="gp">If you’re building firmware on PineBook Pro…</em></strong></p>
                <p id="66f7" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">To install the
                  build tools on PineBook Pro, <a
                    href="https://gist.github.com/lupyuen/046be7362e9ee0b5a89f9d5a3c216bf7"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">check these instructions</a></p>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="1eb5" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">Build PineTime Firmware on
                  Windows, macOS and Raspberry Pi</h1>
                <p id="d628" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv">We’re all set
                  to build our own PineTime Firmware with VSCode!</p>
                <p id="1687" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">1️⃣ Launch
                  VSCode. Click <code class="hu jn jo jp jq b">File → Open Folder</code><br />Select the downloaded
                  folder <code class="hu jn jo jp jq b">pinetime-rust-mynewt</code></p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e18.png" /></p>


                
                <p id="f023" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">When prompted
                  to open the workspace, click <code class="hu jn jo jp jq b">Open Workspace</code></p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e19.png" /></p>


                
                <p id="4eb4" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">When prompted
                  to install Extension Recommendations, click <code class="hu jn jo jp jq b">Install All</code></p>
                <p id="8f09" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">2️⃣ Edit the
                  Rust demo application located at <code
                    class="hu jn jo jp jq b"><a href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/display.rs" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">pinetime-rust-mynewt/rust/app/src/display.rs</a></code>
                </p>
                <p id="8767" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Change <code
                    class="hu jn jo jp jq b">I AM PINETIME</code> to your own message.</p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e20.png" /></p>


                    <p><em>Editing the Rust demo application with
                      VSCode</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="cde1" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">3️⃣ Click <code
                    class="hu jn jo jp jq b">Terminal → Run Task → [2] Build Application</code></p>
                <p id="b6e5" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">This builds the
                  Mynewt Application, which includes our Rust application.</p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e21.png" /></p>


                  <p><em>Build Mynewt Application Log</em></p>
                
                <p id="e510" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">If you see the
                  message <code class="hu jn jo jp jq b">Undefined reference to main</code>, rebuild the application by
                  clicking <code class="hu jn jo jp jq b">Terminal → Run Task → [2] Build Application</code></p>
                <p id="5da9" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">In case of problems, compare with </em><a
                    href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/build-application.log"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">this build
                      log</em></a></p>
                <p id="021a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">4️⃣ Click <code
                    class="hu jn jo jp jq b">Terminal → Run Task → [3] Image Application</code></p>
                <p id="1919" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">This creates
                  the Firmware Image File for our Mynewt Application. The file is located at <code
                    class="hu jn jo jp jq b">pinetime-rust-mynewt/bin/targets/nrf52_my_sensor/app/apps/my_sensor_app/my_sensor_app.img</code>
                </p>
                

                  <p><img src="https://lupyuen.github.io/images/legacy/e22.png" /></p>


                  <p><em>Image Mynewt Application Log</em></p>
                
                <p id="fb7a" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">In case of problems, compare with </em><a
                    href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/image.log"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">this image
                      log</em></a></p>
              </div>
            </div>
            <div class="gu ai">
              

                <p><img src="https://lupyuen.github.io/images/legacy/e23.png" /></p>


                <p><em>Building PineTime Firmware on Windows with
                  VSCode</em></p>
              
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="6ba8" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">Flash New PineTime Firmware
                </h1>
                <p id="5445" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv">Finally let’s
                  flash our new firmware to PineTime!</p>
                <p id="519f" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">1️⃣ If you used
                  a Windows or macOS computer to build the firmware…</p>
                <p id="570d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Copy the
                  application firmware image <code class="hu jn jo jp jq b">my_sensor_app.img</code> from <br /><code
                    class="hu jn jo jp jq b">pinetime-rust-mynewt/bin/targets/nrf52_my_sensor/app/apps/my_sensor_app<br/></code>on
                  your Windows/macOS computer to the same folder on your Raspberry Pi.</p>
                <p id="9d57" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">I used <a
                    href="https://cyberduck.io/" class="bw fk gq gr gs gt"
                    target="_blank" rel="noopener nofollow">Cyberduck</a> to copy the file to Raspberry Pi. This step is
                  not needed if you used a Pi to build the firmware.</p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e24.png" /></p>


                    <p><em>Location of the Mynewt Application Firmware
                      Image <code class="hu jn jo jp jq b">my_sensor_app.img</code></em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="acfb" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">2️⃣ On our
                  Raspberry Pi, enter the following at the command prompt…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/7f466ec8dc83d01ddad25ad5ba81a17d.js"></script></p>

                  <p><em>Commands to flash Mynewt Application to
                    PineTime</em></p>
                
                <p id="8feb" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">3️⃣ We should
                  see…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/35bda5aed106d2ecd1627a409d0058ac.js"></script></p>

                  <p><em>Log of Mynewt Application flashing. From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-application-pi.log"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/logs/load-application-pi.log</a>
                  </em></p>
                
                <p id="3548" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">4️⃣ Our
                  modified firmware is now running on PineTime! Press <code class="hu jn jo jp jq b">Ctrl-C</code> to
                  exit.</p>
                <p id="b7fe" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><a
                    href="https://github.com/lupyuen/pinetime-rust-mynewt/tree/master/rust/app/src"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">Explore the Rust
                      code here to understand how the features were implemented in PineTime</em></a></p>
                <p id="d60c" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">If you prefer
                  to build PineTime firmware and create the firmware image via the command line, here are the commands…
                </p>
                <p id="0de3" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if"><em class="gp">For Windows…</em></strong></p>
                

                  <p><script src="https://gist.github.com/lupyuen/155d1eef73a41a52d497375f55bbee9f.js"></script></p>

                  <p><em>Build firmware and create firmware image on
                    Windows</em></p>
                
                <p id="4dfa" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if"><em class="gp">For macOS and Raspberry Pi…</em></strong></p>
                

                  <p><script src="https://gist.github.com/lupyuen/3422512dc4f99899f55d03d3f046a220.js"></script></p>

                  <p><em>Build firmware and create firmware image on
                    macOS and Raspberry Pi</em></p>
                
                <p id="398b" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">If you see the
                  error message <code class="hu jn jo jp jq b">Undefined reference to main</code>, run <code
                    class="hu jn jo jp jq b">build-app.cmd</code> or <code class="hu jn jo jp jq b">build-app.sh</code>
                  again and it should be fixed.</p>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="76ab" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">Debug PineTime Firmware with
                  Raspberry Pi</h1>
                <p id="3d5c" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv">With only a
                  Raspberry Pi, we may debug the firmware on PineTime: Step into the program line by line, set a
                  breakpoint to pause execution, inspect variables at runtime, …</p>
                <p id="7754" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Check the
                  article<em class="gp"> “</em><a class="bw fk gq gr gs gt" target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi"><em
                      class="gp">Debug Rust+Mynewt Firmware for PineTime on Raspberry Pi</em></a><em class="gp">”</em>
                  for details</p>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Debug Rust+Mynewt Firmware for PineTime on
                          Raspberry Pi</h2>
                      </div>
                      <div class="mm r">
                        <div class="mn r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><a href="https://youtu.be/kuDQwAlQd18">[Watch video on YouTube]</a></p>

                    <p><em>Debugging PineTime Firmware with Raspberry
                      Pi</em></p>
                  
                </div>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="0821" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">💎 Advanced Topic: Build druid
                  UI Firmware for PineTime</h1>
                <p id="6905" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv">Our demo
                  application can render graphics but it’s not interactive like a real watch app… <em class="gp">Watch
                    apps should respond to our touch! Like this… </em><a
                    href="https://vt.tiktok.com/NNm2S5/"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">抖音视频</a></p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><a href="https://youtu.be/Vt5Jem7swrw">[Watch video on YouTube]</a></p>

                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="088f" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">This Rust demo
                  application that responds to touch was programmed with the <a class="bw fk gq gr gs gt"
                    target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/porting-druid-rust-widgets-to-pinetime-smart-watch">druid
                    UI framework</a> like this…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/b188933a060e29aa0e7093984edc17e4.js"></script></p>

                  <p><em>druid UI application. From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/ui.rs"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/ui.rs</a>
                  </em></p>
                
                <p id="315d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">There’s a lot
                  happening in this short piece of code… <a class="bw fk gq gr gs gt" target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/porting-druid-rust-widgets-to-pinetime-smart-watch">Check
                    this article for the details</a>.</p>
                <p id="8fe6" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">To build this
                  druid UI app instead of the previous graphics display app, open VSCode on your Windows or macOS
                  computer. Edit the Rust application configuration file <code
                    class="hu jn jo jp jq b"><a href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/Cargo.toml" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">pinetime-rust-mynewt/rust/app/Cargo.toml</a></code>
                </p>
                <p id="a18d" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Edit the file
                  such that <code class="hu jn jo jp jq b">display_app</code> is commented out, and <code
                    class="hu jn jo jp jq b">ui_app</code> is uncommented…</p>
                

                  <p><script src="https://gist.github.com/lupyuen/cccb0606a42386a56be3c0f2189e51ec.js"></script></p>

                  <p><em>From <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/Cargo.toml"
                      class="bw fk gq gr gs gt" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/Cargo.toml</a>
                  </em></p>
                
                <p id="add1" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Repeat the
                  instructions above to build the PineTime firmware on your computer, then flash the firmware from
                  Raspberry Pi to PineTime. <em class="gp">And now you’ll have an interactive watch app on your
                    PineTime!</em></p>
                <p id="49f2" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><strong
                    class="fy if"><em class="gp">If you wish to flash the druid UI firmware without
                      rebuilding…</em></strong></p>
                <p id="2569" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Download to
                  your Raspberry Pi the <code class="hu jn jo jp jq b">pinetime-rust-mynewt.7z</code> file attached
                  below…<br /><code
                    class="hu jn jo jp jq b"><a href="https://github.com/lupyuen/pinetime-rust-mynewt/releases/tag/v1.0.1" class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">github.com/lupyuen/pinetime-rust-mynewt/releases/tag/v1.0.1</a></code>
                </p>
                <p id="c058" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Then flash the
                  application firmware image <code class="hu jn jo jp jq b">my_sensor_app.img</code> located at
                  <br /><code
                    class="hu jn jo jp jq b">pinetime-rust-mynewt/bin/targets/nrf52_my_sensor/app/apps/my_sensor_app</code>
                </p>
                <blockquote class="mu mv mw">
                  <p id="2843" class="fw fx ap gp fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                      class="cd">💎 </em>In the video above, some touches don’t seem to update the counter. If you have
                    any ideas why, lemme know! Here’s the <a
                      href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/touch_sensor.rs"
                      class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">touchscreen driver in Rust</a>.
                    <a class="bw fk gq gr gs gt" target="_blank" rel="noopener"
                      href="https://lupyuen.github.io/articles/building-a-rust-driver-for-pinetimes-touch-controller">This
                      article explains how it works</a>.</p>
                </blockquote>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e25.jpeg" /></p>


                    <p><em>Rust druid app with touchable button running
                      on PineTime</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <p id="22e3" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Here’s a video
                  of PineTime connected to a Raspberry Pi 4 that’s building the druid app with VSCode… <a
                    href="https://vt.tiktok.com/NNm2S5/"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">抖音视频</a></p>
              </div>
            </div>
            <div class="gu ai">
              

                <p><a href="https://youtu.be/teabAlycMeA">[Watch video on YouTube]</a></p>

                <p><em>Building druid app for PineTime with VSCode on
                  RaspberryPi 4. Uses the “Task Runner” extension: <a
                    href="https://marketplace.visualstudio.com/items?itemName=SanaAjani.taskrunnercode&amp;ssr=false"
                    class="bw fk gq gr gs gt" target="_blank"
                    rel="noopener nofollow">https://marketplace.visualstudio.com/items?itemName=SanaAjani.taskrunnercode&amp;ssr=false</a>
                </em></p>
              
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="60e8" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">💎 Advanced Topic: Flash and
                  Debug PineTime with ST-Link</h1>
                <p id="7c94" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv">If we’re doing
                  serious development with PineTime, I recommend getting an <a
                    href="https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20180924134644&amp;SearchText=st-link+v2&amp;switch_new_app=y"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><strong class="fy if">ST-Link v2
                      USB dongle</strong></a> ($2) that connects PineTime directly to our Windows, macOS or Linux
                  computer.</p>
                <p id="5f67" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">ST-Link allows
                  us to flash PineTime directly from our computer, and it even supports <strong class="fy if">firmware
                    debugging</strong> (setting breakpoints, checking values of variables at runtime, …)</p>
                <p id="48bc" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Here’s how we
                  connect PineTime to ST-Link…</p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e26.jpeg" /></p>


                    <p><em>PineTime connected to ST-Link</em></p>
                  
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                

                  <p><script src="https://gist.github.com/lupyuen/d0fe063f3ef1e30d4639611d1b5b69b7.js"></script></p>

                  <p><em>Connecting PineTime to ST-Link</em></p>
                
                <p id="7b8b" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Instructions
                  for flashing and debugging may be found in the article <em class="gp">“</em><a
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/install-apache-mynewt-and-embedded-rust-for-nrf52-and-visual-studio-code-on-windows-and-macos"><em
                      class="gp">Install Apache Mynewt and Embedded Rust for nRF52 and Visual Studio Code on Windows and
                      macOS</em></a><em class="gp">”</em> under the sections <em class="gp">“Flash The Firmware”</em>
                  and <em class="gp">“Run The Program”.</em></p>
                <p id="604c" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Also check this
                  article that explains the VSCode Debugger configuration files: <em class="gp">“</em><a
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener"
                    href="https://web.archive.org/https://medium.com/@ly.lee/debug-riot-os-on-pinetime-with-vscode-12f00c69c120"><em
                      class="gp">Debug RIOT-OS on PineTime with VSCode</em></a><em class="gp">”</em></p>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="b611" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">What’s Next?</h1>
                <p id="f756" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv">Find out how to
                  debug PineTime firmware with a Raspberry Pi…</p>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Debug Rust+Mynewt Firmware for PineTime on
                          Raspberry Pi</h2>
                      </div>
                      <div class="mm r">
                        <div class="nb r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <p id="dc03" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">We have been
                  using a modified version of OpenOCD that’s faster and more reliable as explained here…</p>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/openocd-on-raspberry-pi-better-with-swd-on-spi">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">OpenOCD on Raspberry Pi: Better with SWD on SPI
                        </h2>
                      </div>
                      <div class="mm r">
                        <div class="nc r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <p id="0480" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">Our PineTime
                  firmware bundles the Watch App together with the operating system (Mynewt OS). If PineTime were a real
                  consumer gadget like an Android phone, we would expect the Watch App to be installed separately from
                  the operating system.</p>
                <p id="d4a2" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><a
                    href="https://gist.github.com/lupyuen/db39430c8a66ce7b4d803458b0daac06"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow">I’m working on a solution for
                    this</a>.</p>
                <p id="5f06" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">Stay Tuned!</em></p>
              </div>
            </div>
            <div class="gu">
              <div class="n p">
                <div class="gv gw gx gy gz ha ae hb af hc ah ai">
                  

                    <p><img src="https://lupyuen.github.io/images/legacy/e27.jpeg" /></p>


                    <p><em>Proposed plan to unbundle Watch Apps from
                      PineTime firmware</em></p>
                  
                </div>
              </div>
            </div>
          </section>
          <hr class="ik em il im in io ic ip iq ir is it" />
          <section class="cv cw cx cy cz">
            <div class="n p">
              <div class="z ab ac ae af da ah ai">
                <h1 id="f83a" class="iu iv ap cd cc iw de ix dh iy iz ja jb jc jd je jf">References</h1>
                <p id="85c5" class="fw fx ap cd fy b fz jg gb gc jh ge gf ji gh gi jj gk gl jk gn go cv"><a
                    href="https://discordapp.com/invite/DgB7kzr"
                    class="bw fk gq gr gs gt" target="_blank" rel="noopener nofollow"><em class="gp">Chat with the
                      PineTime Community and me (lupyuen#4063) on Discord</em></a><em class="gp">!</em></p>
                <p id="4e03" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">To understand
                  the PineTime code, check out the other articles in the PineTime series…</p>
                <p id="acfa" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv"><em
                    class="gp">(Check the “References” section at the end of the first article for more useful
                    links)</em></p>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/sneak-peek-of-pinetime-smart-watch-and-why-its-perfect-for-teaching-iot">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Sneak Peek of PineTime Smart Watch… And why it’s
                          perfect for teaching IoT</h2>
                      </div>
                      <div class="mm r">
                        <div class="nf r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/building-a-rust-driver-for-pinetimes-touch-controller">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Building a Rust Driver for PineTime’s Touch
                          Controller</h2>
                      </div>
                      <div class="mm r">
                        <div class="ng r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/porting-druid-rust-widgets-to-pinetime-smart-watch">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Porting [druid] Rust Widgets to PineTime Smart
                          Watch</h2>
                      </div>
                      <div class="mm r">
                        <div class="nh r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/optimising-pinetimes-display-driver-with-rust-and-mynewt">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Optimising PineTime’s Display Driver with Rust and
                          Mynewt</h2>
                      </div>
                      <div class="mm r">
                        <div class="ni r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Debug Rust+Mynewt Firmware for PineTime on
                          Raspberry Pi</h2>
                      </div>
                      <div class="mm r">
                        <div class="nb r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="https://lupyuen.github.io/articles/my-first-week-as-embedded-foss-advocate">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">My First Week As Embedded FOSS Advocate</h2>
                      </div>
                      <div class="mm r">
                        <div class="nj r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a
                    href="https://marketplace.visualstudio.com/items?itemName=LeeLupYuen.visual-embedded-rust"
                    target="_blank" rel="noopener nofollow">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Visual Embedded Rust</h2>
                      </div>
                      <div class="mm r">
                        <div class="nk r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a
                    href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/chip8"
                    target="_blank" rel="noopener nofollow">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">chip8.rs: CHIP-8 Game Emulator in Rust for PineTime
                          Smart Watch</h2>
                      </div>
                      <div class="mm r">
                        <div class="nl r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <p id="4525" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">The structure
                  of the Rust and Mynewt code on PineTime is similar to this…</p>
                <div class="lw lx ly lz ma mb"><a target="_blank" rel="noopener"
                    href="">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">Coding nRF52 with Rust and Apache Mynewt on Visual
                          Studio Code</h2>
                      </div>
                      <div class="mm r">
                        <div class="nm r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <p id="3ed1" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">The complete
                  source code is here…</p>
                <div class="lw lx ly lz ma mb"><a
                    href="https://github.com/lupyuen/pinetime-rust-mynewt"
                    target="_blank" rel="noopener nofollow">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">lupyuen/pinetime-rust-mynewt</h2>
                      </div>
                      <div class="mm r">
                        <div class="nn r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <p id="59f1" class="fw fx ap cd fy b fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go cv">The <code
                    class="hu jn jo jp jq b">rust</code> folder in the above repository contains link to the following
                  Rust repositories…</p>
                <div class="lw lx ly lz ma mb"><a
                    href="https://github.com/lupyuen/st7735-lcd-batch-rs"
                    target="_blank" rel="noopener nofollow">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">lupyuen/st7735-lcd-batch-rs</h2>
                      </div>
                      <div class="mm r">
                        <div class="no r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a
                    href="https://github.com/lupyuen/druid-embedded"
                    target="_blank" rel="noopener nofollow">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">lupyuen/druid-embedded</h2>
                      </div>
                      <div class="mm r">
                        <div class="np r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a
                    href="https://github.com/lupyuen/piet-embedded"
                    target="_blank" rel="noopener nofollow">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">lupyuen/piet-embedded</h2>
                      </div>
                      <div class="mm r">
                        <div class="nq r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="lw lx ly lz ma mb"><a
                    href="https://github.com/lupyuen/kurbo-embedded"
                    target="_blank" rel="noopener nofollow">
                    <div class="mc n bv">
                      <div class="md n me p mf mg">
                        <h2 class="cc iw mh ce av mi ep as mj au ap">lupyuen/kurbo-embedded</h2>
                      </div>
                      <div class="mm r">
                        <div class="nr r mo mp mq mm mr ms mb"></div>
                      </div>
                    </div>
                  </a></div>
              </div>
            </div>
          </section>
        </div>
      </article>
    </div>
  </div>

  <ul>
    <li>
    <p><a href="https://github.com/sponsors/lupyuen">Sponsor me a coffee</a></p>
    </li>
    <li>
    <p><a href="https://lupyuen.github.io">Check out my articles</a></p>
    </li>
    <li>
    <p><a href="https://lupyuen.github.io/rss.xml">RSS Feed</a></p>
    </li>
  </ul>
    
</body>

</html>
<!--
     FILE ARCHIVED ON 18:41:44 Jun 24, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 10:31:26 Feb 21, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  exclusion.robots: 0.588
  LoadShardBlock: 130.341 (3)
  PetaboxLoader3.resolve: 166.251 (3)
  RedisCDXSource: 4.742
  PetaboxLoader3.datanode: 67.607 (4)
  CDXLines.iter: 35.311 (3)
  captures_list: 177.033
  exclusion.robots.policy: 0.574
  esindex: 0.012
  load_resource: 134.658
-->