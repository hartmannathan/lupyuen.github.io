<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>LLM Bot that reviews Pull Requests for Apache NuttX RTOS</title>

    
    <!-- Begin scripts/articles/*-header.html: Article Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<meta property="og:title" 
    content="LLM Bot that reviews Pull Requests for Apache NuttX RTOS" 
    data-rh="true">
<meta property="og:description" 
    content=""
    data-rh="true">
<meta name="description" 
    content="">
<meta property="og:image" 
    content="https://lupyuen.github.io/images/llm-title.jpg">
<meta property="og:type" 
    content="article" data-rh="true">
<link rel="canonical"
    href="https://lupyuen.codeberg.page/articles/llm.html" />
<!-- End scripts/articles/*-header.html -->
<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">
<link rel="stylesheet" type="text/css" href="../dark.css">
<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
</style>
<!-- End scripts/rustdoc-header.html -->


</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
    <!-- Begin scripts/rustdoc-before.html: Pre-HTML for Custom Markdown files processed by rustdoc, like chip8.md -->

    <!-- Begin Theme Picker -->
    <div class="theme-picker" style="left: 0"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg"
        width="18" alt="Pick another theme!"></button>
        <div id="theme-choices"></div>
    </div>
    <!-- Theme Picker -->

    <!-- End scripts/rustdoc-before.html -->
    

    <h1 class="title">LLM Bot that reviews Pull Requests for Apache NuttX RTOS</h1>
    <nav id="TOC"><ul>
<li><a href="#pr-bot-in-action">1 PR Bot in Action</a><ul></ul></li>
<li><a href="#requirements-for-pr-review">2 Requirements for PR Review</a><ul></ul></li>
<li><a href="#call-the-gemini-llm">3 Call the Gemini LLM</a><ul></ul></li>
<li><a href="#fail-gracefully-with-emojis">4 Fail Gracefully with Emojis</a><ul></ul></li>
<li><a href="#call-the-github-api">5 Call the GitHub API</a><ul></ul></li>
<li><a href="#run-everything">6 Run Everything</a><ul></ul></li>
<li><a href="#all-things-considered">7 All Things Considered</a><ul></ul></li>
<li><a href="#run-log">8 Run Log</a><ul></ul></li>
<li><a href="#whats-next">9 What‚Äôs Next</a><ul></ul></li></ul></nav><p>üìù <em>30 Sep 2024</em></p>
<p><img src="https://lupyuen.github.io/images/llm-title.jpg" alt="TODO" /></p>
<p>TODO</p>
<h1 id="pr-bot-in-action"><a class="doc-anchor" href="#pr-bot-in-action">¬ß</a>1 PR Bot in Action</h1>
<p>TODO</p>
<p>Suppose we <a href="TODO"><strong>Submit a Pull Request</strong></a> to the NuttX Repo‚Ä¶</p>
<div style="margin-left: 5%; width: 90%; font-size:90%">
<p><strong>Summary</strong> <br>
<em>Document stack and backtrace dump for Espressif SoCs [‚Ä¶more‚Ä¶]</em></p>
<p><strong>Impact</strong> <br>
<em>Fix backtrace dump on assertions considering assertions triggered by tasks or during an interrupt service.</em></p>
<p><strong>Testing</strong> <br>
<em>Internal CI testing with HW on all Xtensa-based devices [‚Ä¶more‚Ä¶]</em></p>
<p><a href="https://github.com/apache/nuttx/pull/13546">(Thanks to <strong>Tiago Medicci Serrano</strong>)</a></p>
</div>
<p>Our PR Review Bot will helpfully <strong>Review the Pull Request</strong> and post a Review Comment‚Ä¶</p>
<div style="margin-left: 5%; width: 90%; font-size:90%">
<p><em>This PR appears to meet the NuttX requirements. Here‚Äôs a breakdown:</em></p>
<p><strong>Summary:</strong></p>
<ul>
<li><strong>Clear explanation of the change:</strong> The summary clearly states the purpose of the change, addressing a fix for the backtrace dump functionality specifically for Espressif SoCs <em>[‚Ä¶more‚Ä¶]</em></li>
<li><strong>Issue references:</strong> While not explicitly mentioned, the summary implies addressing an existing issue with backtrace dumps on the mentioned architectures. It would be beneficial to add specific issue references if applicable.</li>
</ul>
<p><strong>Impact:</strong></p>
<ul>
<li><strong>Feature change:</strong> This PR focuses on fixing an existing feature (backtrace dump), not introducing a new one <em>[‚Ä¶more‚Ä¶]</em></li>
<li><strong>Security impact:</strong> No security implications are mentioned.</li>
<li><strong>Compatibility impact:</strong> No backward or forward compatibility issues are mentioned.</li>
</ul>
<p><strong>Testing:</strong></p>
<ul>
<li><strong>Verification:</strong> The author confirms testing on local setup with positive results.</li>
<li><strong>Host and Target:</strong> While ‚ÄúInternal CI testing‚Äù is mentioned, listing specific host OS, compiler versions, and target boards used for testing would strengthen the validation <em>[‚Ä¶more‚Ä¶]</em></li>
</ul>
<p><strong>Overall:</strong></p>
<p>This PR demonstrates a good understanding of NuttX requirements. Adding specific issue references and detailing the testing environment would further strengthen it.</p>
<p><a href="https://github.com/apache/nuttx/pull/13546#issuecomment-2361854435">(See the <strong>Review Comment</strong>)</a></p>
</div>
<p>Hopefully this will be helpful to <strong>New Contributors</strong> to NuttX. And it might help the <strong>PR Reviewers</strong> too.</p>
<p>How did this happen? We find out‚Ä¶</p>
<h1 id="requirements-for-pr-review"><a class="doc-anchor" href="#requirements-for-pr-review">¬ß</a>2 Requirements for PR Review</h1>
<p><em>Our Bot gets really chatty and naggy. Why?</em></p>
<p>That‚Äôs because we programmed it with a <strong>Long List of Requirements</strong> for PR Review, in Markdown Format: <a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L24-L66">main.rs</a></p>
<div style="margin-left: 5%; width: 90%; font-size:90%">

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// Requirements for PR Review
</span><span class="kw">const </span>REQUIREMENTS: <span class="kw-2">&amp;</span>str =
<span class="string">r#####"

# Summary

* Why change is necessary (fix, update, new feature)?
* What functional part of the code is being changed?
* How does the change exactly work (what will change and how)?
* Related [NuttX Issue](https://github.com/apache/nuttx/issues) reference if applicable.
* Related NuttX Apps [Issue](https://github.com/apache/nuttx-apps/issues) / [Pull Request](https://github.com/apache/nuttx-apps/pulls) reference if applicable.

# Impact

* Is new feature added? Is existing feature changed?
* Impact on user (will user need to adapt to change)? NO / YES (please describe if yes).
* Impact on build (will build process change)? NO / YES (please descibe if yes).
* Impact on hardware (will arch(s) / board(s) / driver(s) change)? NO / YES (please describe if yes).
* Impact on documentation (is update required / provided)? NO / YES (please describe if yes).
* Impact on security (any sort of implications)? NO / YES (please describe if yes).
* Impact on compatibility (backward/forward/interoperability)? NO / YES (please describe if yes).
* Anything else to consider?

# Testing

I confirm that changes are verified on local setup and works as intended:
* Build Host(s): OS (Linux,BSD,macOS,Windows,..), CPU(Intel,AMD,ARM), compiler(GCC,CLANG,version), etc.
* Target(s): arch(sim,RISC-V,ARM,..), board:config, etc.

Testing logs before change: _your testing logs here_

Testing logs after change: _your testing logs here_
"#####</span>;</code></pre></div>
<p><a href="TODO">(Thanks to <strong>Tomek Cedro</strong>)</a></p>
</div>
<p><em>But these are Human-Readable Requirements?</em></p>
<p>That‚Äôs the beauty of an LLM: We feed it the <strong>Human Text</strong>, then the LLM gets it (hopefully) and does what we expect it to do!</p>
<p>It helps to <strong>define our requirements precisely</strong>, mark the boundaries clearly. Otherwise our LLM will wander off, and hallucinate strange new ways to validate our Pull Request.</p>
<p><a href="TODO">(Which happened in our last <strong>LLM Experiment</strong>)</a></p>
<p><em>How do we feed the PR Content to LLM?</em></p>
<p>Our PR Requirements are in <strong>Markdown Format</strong>. Same for the PR Content.</p>
<p>Thus we meld them together into <strong>One Long Markdown Doc</strong> and feed to LLM: <a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L212-L218">main.rs</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Compose the Prompt for LLM Request:
// PR Requirements + PR Body
</span><span class="kw">let </span>input = 
  REQUIREMENTS.to_string() +
  <span class="string">"\n\n# Does this PR meet the NuttX Requirements? Please be concise\n\n" </span>+
  <span class="kw-2">&amp;</span>body;</code></pre></div>
<p>Which will look like this‚Ä¶</p>
<div class="example-wrap"><pre class="language-text"><code># Here are the requirements for a NuttX PR
## Summary [...requirements...]
## Impact [...requirements...]
## Testing [...requirements...]

# Does this PR meet the NuttX Requirements? Please be concise
## Summary
Document stack and backtrace dump for Espressif SoCs [...more...]

## Impact
Fix backtrace dump on assertions considering assertions triggered by tasks or during an interrupt service.

## Testing
Internal CI testing with HW on all Xtensa-based devices [...more...]
</code></pre></div>
<p><em>Why ‚Äúplease be concise‚Äù?</em></p>
<p>Based on <a href="https://github.com/apache/nuttx/pull/13494#issuecomment-2360421272"><strong>Community Feedback</strong></a>, our Bot was getting way too chatty and naggy.</p>
<p>It‚Äôs hard to control the LLM Output, hence we politely asked LLM to <strong>tone down the response</strong>. (And be a little less irritating)</p>
<p>Also we excluded the Bot from Pull Requests that are <a href="TODO"><strong>Extra Small</strong></a>. (10 lines of code changes or fewer)</p>
<p><em>Will our Bot get stuck in a loop? Forever replying to its own responses?</em></p>
<p>Nope it won‚Äôt. Our Bot will skip <a href="TODO"><strong>Pull Requests that have Comments</strong></a>.</p>
<h1 id="call-the-gemini-llm"><a class="doc-anchor" href="#call-the-gemini-llm">¬ß</a>3 Call the Gemini LLM</h1>
<p><em>How are we running the LLM?</em></p>
<p>We call <a href="TODO"><strong>Gemini Pro 1.5</strong></a> for the LLM: <a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L205-L212">main.rs</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Init the Gemini Client (Pro 1.5)
</span><span class="kw">let </span>client = Client::new_from_model(
  Model::Gemini1_5Pro,
  env::var(<span class="string">"GEMINI_API_KEY"</span>).unwrap().to_string()
);

<span class="comment">// Compose the Prompt for Gemini Request:
// PR Requirements + PR Body
</span><span class="kw">let </span>input = 
  REQUIREMENTS.to_string() +
  <span class="string">"\n\n# Does this PR meet the NuttX Requirements? Please be concise\n\n" </span>+
  <span class="kw-2">&amp;</span>body;</code></pre></div>
<p>After composing the <strong>LLM Prompt</strong> (PR Requirements + PR Contents), we send it to Gemini: <a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L212-L252">main.rs</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Compose the Gemini Request
</span><span class="kw">let </span>txt_request = Request {
  contents: <span class="macro">vec!</span>[Content {
    role: Role::User,
    parts: <span class="macro">vec!</span>[Part {
      text: <span class="prelude-val">Some</span>(input.to_string()),
      inline_data: <span class="prelude-val">None</span>,
      file_data: <span class="prelude-val">None</span>,
      video_metadata: <span class="prelude-val">None</span>,
    }],
  }],
  tools: <span class="macro">vec!</span>[],
  safety_settings: <span class="macro">vec!</span>[],
  generation_config: <span class="prelude-val">None</span>,
  system_instruction: <span class="prelude-val">None</span>,
};

<span class="comment">// Send the Gemini Request
</span><span class="kw">let </span>response = client
  .post(<span class="number">30</span>, <span class="kw-2">&amp;</span>txt_request)
  .<span class="kw">await</span><span class="question-mark">?</span>;

<span class="comment">// Get the Gemini Response
</span><span class="kw">let </span>response_text = 
  response.rest().unwrap()
  .candidates.first().unwrap()
  .content.parts.first().unwrap()
  .text.clone().unwrap();</code></pre></div>
<p><strong>Gemini Response</strong> will be in Markdown Format‚Ä¶</p>
<div style="margin-left: 5%; width: 90%; font-size:90%">
<div class="example-wrap"><pre class="language-text"><code>## NuttX PR Requirements Review

This PR appears to meet the NuttX requirements. Here&#39;s a breakdown:

**Summary:**

* **Clear explanation of the change:** The summary clearly states the purpose of the change, addressing a fix for the backtrace dump functionality specifically for Espressif SoCs. 
* **Functional area:**  The affected area is clearly identified (stack and backtrace dump for xtensa/esp32).
* **Mechanism:**  The summary outlines how the change works, including fixes to the `MAKE_PC_FROM_RA` macro, sanity checks, and script updates.
* **Issue references:** While not explicitly mentioned, the summary implies addressing an existing issue with backtrace dumps on the mentioned architectures. It would be beneficial to add specific issue references if applicable.

**Impact:**

* **Feature change:** This PR focuses on fixing an existing feature (backtrace dump), not introducing a new one.
* **User impact:** No user-facing changes are described, implying minimal impact.
* **Build impact:** No build process changes are mentioned.
* **Hardware impact:** The changes are specific to Xtensa-based devices, specifically ESP32 and its variants, which is clearly stated.
* **Documentation impact:** The summary explicitly mentions updating documentation for each affected chip. 
* **Security impact:** No security implications are mentioned.
* **Compatibility impact:**  No backward or forward compatibility issues are mentioned.

**Testing:**

* **Verification:** The author confirms testing on local setup with positive results. 
* **Host and Target:**  While &quot;Internal CI testing&quot; is mentioned,  listing specific host OS, compiler versions, and target boards used for testing would strengthen the validation.
* **Logs:** The PR provides clear steps to reproduce the issue and verify the fix on an ESP32. Including snippets of actual logs before and after the change would further enhance the testing section.

**Overall:**

This PR demonstrates a good understanding of NuttX requirements.  Adding specific issue references and detailing the testing environment would further strengthen it. 
</code></pre></div>
<p><a href="https://github.com/apache/nuttx/pull/13546#issuecomment-2361854435">(See the <strong>Gemini Response</strong>)</a></p>
</div>
<p><em>But we didn‚Äôt tell Gemini to respond in Markdown?</em></p>
<p>That‚Äôs the law of <strong>‚ÄúLLM See, LLM Do‚Äù</strong>! We fed the input in Markdown Format, so it produced the output in Markdown Format too.</p>
<p><em>Are we paying Google for the LLM?</em></p>
<p>Right now we call the <strong>Free Tier</strong> of Gemini Pro 1.5. Which limits us to <a href="TODO"><strong>50 LLM Requests</strong></a> per day.</p>
<p>That‚Äôs sufficient to review <strong>50 Pull Requests</strong> for NuttX every day. (For both the <a href="TODO"><strong>NuttX Kernel Repo</strong></a> and the <a href="TODO"><strong>NuttX Apps Repo</strong></a>)</p>
<h1 id="fail-gracefully-with-emojis"><a class="doc-anchor" href="#fail-gracefully-with-emojis">¬ß</a>4 Fail Gracefully with Emojis</h1>
<p><em>Any gotchas with the Free Tier of Gemini LLM?</em></p>
<p>Gemini API will <strong>sometimes fail</strong> with HTTP 500 (not sure why). And the Failed Request will be <strong>counted in our Daily Quota</strong>! (50 per day)</p>
<p>Thus we retry <strong>up to 3 times</strong>, in case the Pull Request has some problematic text that the LLM couldn‚Äôt handle.</p>
<p><em>How does our Bot know when to stop the retries?</em></p>
<p>Our Bot uses <strong>Emoji Reactions</strong> to tag each attempt. We will see the Pull Request tagged with‚Ä¶</p>
<div><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>üöÄ</td><td>First Attempt</td></tr>
<tr><td>üëÄ</td><td>Second Attempt</td></tr>
<tr><td>üöÄüëÄ</td><td>Third Attempt</td></tr>
</tbody></table>
</div>
<p><br> And then the Bot gives up. If it‚Äôs hunky dory, our Bot erases its own Emoji Reactions. Our code does this: <a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L306-L320">main.rs</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// Bump up the 2 PR Reactions: 00 &gt; 01 &gt; 10 &gt; 11
/// Position 0 is the Rocket Reaction, Position 1 is the Eye Reaction
</span><span class="kw">async fn </span>bump_reactions(issues: <span class="kw-2">&amp;</span>IssueHandler&lt;<span class="lifetime">'_</span>&gt;, pr_id: u64, reactions: (<span class="prelude-ty">Option</span>&lt;u64&gt;, <span class="prelude-ty">Option</span>&lt;u64&gt;)) -&gt; <span class="prelude-ty">Result</span>&lt;(), Box&lt;<span class="kw">dyn </span>std::error::Error&gt;&gt; {
  <span class="kw">match </span>reactions {
    <span class="comment">// (Rocket, Eye)
    </span>(<span class="prelude-val">None</span>,     <span class="prelude-val">None</span>)    =&gt; { create_reaction(issues, pr_id, ReactionContent::Rocket).<span class="kw">await</span><span class="question-mark">?</span>; }
    (<span class="prelude-val">Some</span>(id), <span class="prelude-val">None</span>)    =&gt; { delete_reaction(issues, pr_id, id).<span class="kw">await</span><span class="question-mark">?</span>; create_reaction(issues, pr_id, ReactionContent::Eyes).<span class="kw">await</span><span class="question-mark">?</span>; }
    (<span class="prelude-val">None</span>,     <span class="prelude-val">Some</span>(<span class="kw">_</span>)) =&gt; { create_reaction(issues, pr_id, ReactionContent::Rocket).<span class="kw">await</span><span class="question-mark">?</span>; }
    (<span class="prelude-val">Some</span>(<span class="kw">_</span>),  <span class="prelude-val">Some</span>(<span class="kw">_</span>)) =&gt; { <span class="macro">panic!</span>(<span class="string">"Reaction Overflow"</span>) }
  }
  <span class="prelude-val">Ok</span>(())
}</code></pre></div>
<p><a href="TODO">(<strong>create_reaction</strong> is here)</a></p>
<p><a href="TODO">(<strong>delete_reaction</strong> is here)</a></p>
<p>TODO: Pic of Emoji Reactions</p>
<h1 id="call-the-github-api"><a class="doc-anchor" href="#call-the-github-api">¬ß</a>5 Call the GitHub API</h1>
<p><em>How do we fetch the Pull Request? And post the Review Comment?</em></p>
<p>We call the GitHub API with the <a href="https://github.com/XAMPPRocky/octocrab"><strong>Octocrab Crate</strong></a>.</p>
<p>TODO: Fetch the 20 Newest Pull Requests that are Open</p>
<p><a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L97-L115">main.rs</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Fetch the 20 Newest Pull Requests that are Open
</span><span class="kw">let </span>pr_list = octocrab
  .pulls(owner, repo)
  .list()
  .state(params::State::Open)
  .sort(params::pulls::Sort::Created)
  .direction(params::Direction::Descending)
  .per_page(<span class="number">20</span>)
  .send()
  .<span class="kw">await</span><span class="question-mark">?</span>;

<span class="comment">// Every 5 Seconds: Process the next PR fetched
</span><span class="kw">for </span>pr <span class="kw">in </span>pr_list {
  <span class="kw">let </span>pr_id = pr.number;
  process_pr(<span class="kw-2">&amp;</span>pulls, <span class="kw-2">&amp;</span>issues, pr_id)
    .<span class="kw">await</span><span class="question-mark">?</span>;
  sleep(Duration::from_secs(<span class="number">5</span>));
}</code></pre></div>
<p>TODO: process_pr</p>
<p><a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L119-L194">main.rs</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Skip if PR contains Comments
</span><span class="kw">if </span>pr.comments.unwrap() &gt; <span class="number">0 </span>{ <span class="kw">return </span><span class="prelude-val">Ok</span>(()); }

<span class="comment">// Skip if PR Size is Unknown or Extra Small
</span><span class="kw">let </span>labels = pr.labels.unwrap();
<span class="kw">let </span>size_xs: Vec&lt;Label&gt; = labels
  .into_iter()
  .filter(|l| l.name == <span class="string">"Size: XS"</span>)
  .collect();
<span class="kw">if </span>labels.is_empty() || size_xs.len() &gt; <span class="number">0 </span>{ <span class="kw">return </span><span class="prelude-val">Ok</span>(()); }

<span class="comment">// Get the PR Body
</span><span class="kw">let </span>body = pr.body.unwrap_or(<span class="string">""</span>.to_string());

<span class="comment">// Fetch the PR Commits. TODO: Will change `pull_number` to `pr_commits`
</span><span class="kw">let </span>commits = octocrab
  .pulls(owner, repo);
  .pull_number(pr_id)
  .commits()
  .<span class="kw">await</span>;
<span class="kw">let </span>commits = commits.unwrap().items;

<span class="comment">// Omitted: Check for Empty Commit Message</span></code></pre></div>
<p>TODO: Post Comment</p>
<p><a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/src/main.rs#L261-L267">main.rs</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// Post the PR Comment
</span><span class="kw">let </span>comment = octocrab
  .issues(owner, repo);
  .create_comment(pr_id, comment_text)
  .<span class="kw">await</span><span class="question-mark">?</span>;</code></pre></div>
<h1 id="run-everything"><a class="doc-anchor" href="#run-everything">¬ß</a>6 Run Everything</h1>
<p>TODO</p>
<p><a href="https://github.com/lupyuen/nuttx-pr-bot/blob/main/run.sh">run.sh</a></p>
<div class="example-wrap"><pre class="language-bash"><code>#!/usr/bin/env bash
## Handle PRs for NuttX Kernel and Apps every 10 minutes

## Update the repo
git pull

## Set the GitHub and Gemini Tokens
## export GITHUB_TOKEN=...
## export GEMINI_API_KEY=...
. $HOME/github-token.sh
. $HOME/gemini-token.sh

## Echo commands
set -x

## Enable Rust Logging
export RUST_LOG=info 
export RUST_BACKTRACE=1

## Handle PRs for NuttX Kernel and Apps every 10 minutes
for (( ; ; ))
do
  ## For NuttX Kernel Repo
  cargo run -- --owner apache --repo nuttx
  sleep 300

  ## For NuttX Apps Repo
  cargo run -- --owner apache --repo nuttx-apps
  sleep 300
done
</code></pre></div>
<p>See the <a href="https://github.com/apache/nuttx/pull/13494#issuecomment-2357300091">discussion for NuttX PR Review Bot</a></p>
<div class="example-wrap"><pre class="language-bash"><code>## See `run.sh` for the Complete Script

## Browse to Google AI Studio &gt; Get API Key &gt; Create API Key &gt; Create API Key In New Project
## https://aistudio.google.com/app/apikey
export GEMINI_API_KEY=...

## GitHub Settings &gt; Developer Settings &gt; Tokens (Classic) &gt; Generate New Token (Classic)
## Check the following:
## repo (Full control of private repositories)
## repo:status (Access commit status)
## repo_deployment (Access deployment status)
## public_repo (Access public repositories)
## repo:invite (Access repository invitations)
## security_events (Read and write security events)
export GITHUB_TOKEN=...

## Enable Rust Logging
export RUST_LOG=info 
export RUST_BACKTRACE=1

## Run the NuttX PR Bot once on NuttX Repo
cargo run -- --owner apache --repo nuttx

## Which will: Fetch the Latest 20 PRs
##   If PR Status = Open
##   And PR Comments don&#39;t exist
##     Then Call Gemini API to Validate the PR
##     And Post Gemini Response as PR Comment

## For NuttX Apps Repo
cargo run -- --owner apache --repo nuttx-apps
</code></pre></div><h1 id="all-things-considered"><a class="doc-anchor" href="#all-things-considered">¬ß</a>7 All Things Considered</h1>
<p>TODO</p>
<p>Started as AI project? No, hike hallucination</p>
<p>Still monitoring</p>
<p>Inconsistency, can‚Äôt force the output</p>
<p>Different personas</p>
<p>Free, doesn‚Äôt rely on <a href="TODO"><strong>GitHub Runners</strong></a></p>
<p><em>(What if Google starts charging for their LLM? We‚Äôll switch to another Free LLM. Yeah life gets tough for Open Source Projects sigh)</em></p>
<h1 id="run-log"><a class="doc-anchor" href="#run-log">¬ß</a>8 Run Log</h1>
<p>TODO</p>
<div class="example-wrap"><pre class="language-text"><code>+ cargo run --owner apache --repo nuttx
warning: use of deprecated method `octocrab::pulls::PullRequestHandler::&lt;&#39;octo&gt;::pull_number`: specific PR builder transitioned to pr_review_actions, reply_to_comment, reply_to_comment
   --&gt; src/main.rs:141:10
    |
141 |         .pull_number(pr_id)
    |          ^^^^^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default

warning: `nuttx-pr-bot` (bin &quot;nuttx-pr-bot&quot;) generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.18s
     Running `target/debug/nuttx-pr-bot`
[2024-09-20T07:47:40Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13554&quot;
[2024-09-20T07:47:40Z INFO  nuttx_pr_bot] PR Body: &quot;## Summary\r\ni2c: Optimize access to private data\r\n## Impact\r\ni2c_driver\r\n## Testing\r\nLocal iic testing\r\n&quot;
[2024-09-20T07:47:47Z INFO  nuttx_pr_bot] Gemini Response: Rest(
        GeminiResponse {
            candidates: [
                Candidate {
                    content: Content {
                        role: Model,
                        parts: [
                            Part {
                                text: Some(
                                    &quot;**No, this PR does not meet the NuttX requirements.**\n\n**Missing Information:**\n\n* **Summary:** \n    * Lacks a clear explanation of why the change is necessary. Is it a bug fix, performance improvement, or code cleanup?\n    * Doesn&#39;t describe the functional part of the code being changed within the i2c driver. \n    *  Missing details on how the optimization works. \n    *  No mention of related issues.\n* **Impact:**\n    * All impact sections are marked as \&quot;i2c_driver,\&quot; which is too vague.\n    *  The description should clearly state whether the impact is \&quot;NO\&quot; or \&quot;YES\&quot; and provide specific details if applicable. For example, does the change affect any specific architectures, boards, or drivers?\n* **Testing:**\n    * Lacks details about the local setup (host OS, target architecture, board configuration).\n    *  \&quot;Local iic testing\&quot; is insufficient. Provide specific test cases and commands used.\n    *  No testing logs provided. \n\n**To meet the NuttX requirements, the PR needs to provide comprehensive information in each section. ** \n&quot;,
                                ),
                                inline_data: None,
                                file_data: None,
                                video_metadata: None,
                            },
                        ],
                    },
                    finish_reason: Some(
                        &quot;STOP&quot;,
                    ),
                    index: Some(
                        0,
                    ),
                    safety_ratings: [
                        SafetyRating {
                            category: HarmCategorySexuallyExplicit,
                            probability: Negligible,
                            blocked: false,
                        },
                        SafetyRating {
                            category: HarmCategoryHateSpeech,
                            probability: Negligible,
                            blocked: false,
                        },
                        SafetyRating {
                            category: HarmCategoryHarassment,
                            probability: Negligible,
                            blocked: false,
                        },
                        SafetyRating {
                            category: HarmCategoryDangerousContent,
                            probability: Negligible,
                            blocked: false,
                        },
                    ],
                },
            ],
            prompt_feedback: None,
            usage_metadata: Some(
                UsageMetadata {
                    prompt_token_count: 453,
                    candidates_token_count: 244,
                },
            ),
        },
    )
[2024-09-20T07:47:47Z INFO  nuttx_pr_bot] Response Text: &quot;**No, this PR does not meet the NuttX requirements.**\n\n**Missing Information:**\n\n* **Summary:** \n    * Lacks a clear explanation of why the change is necessary. Is it a bug fix, performance improvement, or code cleanup?\n    * Doesn&#39;t describe the functional part of the code being changed within the i2c driver. \n    *  Missing details on how the optimization works. \n    *  No mention of related issues.\n* **Impact:**\n    * All impact sections are marked as \&quot;i2c_driver,\&quot; which is too vague.\n    *  The description should clearly state whether the impact is \&quot;NO\&quot; or \&quot;YES\&quot; and provide specific details if applicable. For example, does the change affect any specific architectures, boards, or drivers?\n* **Testing:**\n    * Lacks details about the local setup (host OS, target architecture, board configuration).\n    *  \&quot;Local iic testing\&quot; is insufficient. Provide specific test cases and commands used.\n    *  No testing logs provided. \n\n**To meet the NuttX requirements, the PR needs to provide comprehensive information in each section. ** \n&quot;
[2024-09-20T07:47:48Z INFO  nuttx_pr_bot] PR Comment: Comment {
        id: CommentId(
            2363049923,
        ),
        node_id: &quot;IC_kwDODZiUac6M2UfD&quot;,
        url: Url {
            scheme: &quot;https&quot;,
            cannot_be_a_base: false,
            username: &quot;&quot;,
            password: None,
            host: Some(
                Domain(
                    &quot;api.github.com&quot;,
                ),
            ),
            port: None,
            path: &quot;/repos/apache/nuttx/issues/comments/2363049923&quot;,
            query: None,
            fragment: None,
        },
        html_url: Url {
            scheme: &quot;https&quot;,
            cannot_be_a_base: false,
            username: &quot;&quot;,
            password: None,
            host: Some(
                Domain(
                    &quot;github.com&quot;,
                ),
            ),
            port: None,
            path: &quot;/apache/nuttx/pull/13554&quot;,
            query: None,
            fragment: Some(
                &quot;issuecomment-2363049923&quot;,
            ),
        },
        issue_url: Some(
            Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/repos/apache/nuttx/issues/13554&quot;,
                query: None,
                fragment: None,
            },
        ),
        body: Some(
            &quot;[**\\[Experimental Bot, please feedback here\\]**](https://github.com/search?q=repo%3Aapache%2Fnuttx+13552&amp;type=issues)\n\n\n\n**No, this PR does not meet the NuttX requirements.**\n\n**Missing Information:**\n\n* **Summary:** \n    * Lacks a clear explanation of why the change is necessary. Is it a bug fix, performance improvement, or code cleanup?\n    * Doesn&#39;t describe the functional part of the code being changed within the i2c driver. \n    *  Missing details on how the optimization works. \n    *  No mention of related issues.\n* **Impact:**\n    * All impact sections are marked as \&quot;i2c_driver,\&quot; which is too vague.\n    *  The description should clearly state whether the impact is \&quot;NO\&quot; or \&quot;YES\&quot; and provide specific details if applicable. For example, does the change affect any specific architectures, boards, or drivers?\n* **Testing:**\n    * Lacks details about the local setup (host OS, target architecture, board configuration).\n    *  \&quot;Local iic testing\&quot; is insufficient. Provide specific test cases and commands used.\n    *  No testing logs provided. \n\n**To meet the NuttX requirements, the PR needs to provide comprehensive information in each section. ** \n&quot;,
        ),
        body_text: None,
        body_html: None,
        author_association: None,
        user: Author {
            login: &quot;nuttxpr&quot;,
            id: UserId(
                181999181,
            ),
            node_id: &quot;U_kgDOCtkWTQ&quot;,
            avatar_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;avatars.githubusercontent.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/u/181999181&quot;,
                query: Some(
                    &quot;v=4&quot;,
                ),
                fragment: None,
            },
            gravatar_id: &quot;&quot;,
            url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr&quot;,
                query: None,
                fragment: None,
            },
            html_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/nuttxpr&quot;,
                query: None,
                fragment: None,
            },
            followers_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/followers&quot;,
                query: None,
                fragment: None,
            },
            following_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/following%7B/other_user%7D&quot;,
                query: None,
                fragment: None,
            },
            gists_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/gists%7B/gist_id%7D&quot;,
                query: None,
                fragment: None,
            },
            starred_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/starred%7B/owner%7D%7B/repo%7D&quot;,
                query: None,
                fragment: None,
            },
            subscriptions_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/subscriptions&quot;,
                query: None,
                fragment: None,
            },
            organizations_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/orgs&quot;,
                query: None,
                fragment: None,
            },
            repos_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/repos&quot;,
                query: None,
                fragment: None,
            },
            events_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/events%7B/privacy%7D&quot;,
                query: None,
                fragment: None,
            },
            received_events_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/received_events&quot;,
                query: None,
                fragment: None,
            },
            type: &quot;User&quot;,
            site_admin: false,
            patch_url: None,
            email: None,
        },
        created_at: 2024-09-20T07:47:47Z,
        updated_at: Some(
            2024-09-20T07:47:47Z,
        ),
    }
[2024-09-20T07:47:49Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13554&quot;
[2024-09-20T07:48:54Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13553&quot;
[2024-09-20T07:48:54Z INFO  nuttx_pr_bot] PR Body: &quot;## Summary\r\nnuttx add pci ep framework\r\n## Impact\r\n\r\n## Testing\r\n\r\n&quot;
[2024-09-20T07:49:04Z INFO  nuttx_pr_bot] Gemini Response: Rest(
        GeminiResponse {
            candidates: [
                Candidate {
                    content: Content {
                        role: Model,
                        parts: [
                            Part {
                                text: Some(
                                    &quot;**No, this PR does not meet the NuttX requirements.**\n\n**Summary:**\n\n* **Insufficient information:** The summary is too brief and lacks essential details. It doesn&#39;t explain:\n    * **Necessity:** Why is the PCI EP framework needed? What problem does it solve, or what improvement does it bring?\n    * **Functionality:** Which part of the codebase is affected? What specific PCI EP capabilities are being added?\n    * **Implementation:** How does the framework work? What changes have been made to the code?\n* **Missing references:**  Are there related NuttX issues or NuttX Apps issues/pull requests?\n\n**Impact:**\n\n* **Entirely missing:** The impact section is empty.  You must address all the points to demonstrate a thorough understanding of your changes.\n\n**Testing:**\n\n* **No details provided:** \n    *  You need to list the specific build hosts (OS, CPU, compiler) and target devices (architecture, board, configuration) where you tested the changes.\n    *  Provide actual testing logs from **before** and **after** the change to show the difference in behavior.\n\n**To improve this PR:**\n\n1. **Expand the Summary:** Provide a clear and detailed explanation of the changes, their purpose, and how they are implemented.\n2. **Complete the Impact section:** Analyze and describe the impact of your changes on all the listed aspects (user, build, hardware, documentation, security, compatibility).\n3. **Provide Testing Details:** Specify your build hosts and target devices, and include relevant testing logs from before and after applying your changes.\n\n**By addressing these points, your PR will be far more likely to be reviewed and merged.** \n&quot;,
                                ),
                                inline_data: None,
                                file_data: None,
                                video_metadata: None,
                            },
                        ],
                    },
                    finish_reason: Some(
                        &quot;STOP&quot;,
                    ),
                    index: Some(
                        0,
                    ),
                    safety_ratings: [
                        SafetyRating {
                            category: HarmCategorySexuallyExplicit,
                            probability: Negligible,
                            blocked: false,
                        },
                        SafetyRating {
                            category: HarmCategoryHateSpeech,
                            probability: Negligible,
                            blocked: false,
                        },
                        SafetyRating {
                            category: HarmCategoryHarassment,
                            probability: Negligible,
                            blocked: false,
                        },
                        SafetyRating {
                            category: HarmCategoryDangerousContent,
                            probability: Negligible,
                            blocked: false,
                        },
                    ],
                },
            ],
            prompt_feedback: None,
            usage_metadata: Some(
                UsageMetadata {
                    prompt_token_count: 441,
                    candidates_token_count: 358,
                },
            ),
        },
    )
[2024-09-20T07:49:04Z INFO  nuttx_pr_bot] Response Text: &quot;**No, this PR does not meet the NuttX requirements.**\n\n**Summary:**\n\n* **Insufficient information:** The summary is too brief and lacks essential details. It doesn&#39;t explain:\n    * **Necessity:** Why is the PCI EP framework needed? What problem does it solve, or what improvement does it bring?\n    * **Functionality:** Which part of the codebase is affected? What specific PCI EP capabilities are being added?\n    * **Implementation:** How does the framework work? What changes have been made to the code?\n* **Missing references:**  Are there related NuttX issues or NuttX Apps issues/pull requests?\n\n**Impact:**\n\n* **Entirely missing:** The impact section is empty.  You must address all the points to demonstrate a thorough understanding of your changes.\n\n**Testing:**\n\n* **No details provided:** \n    *  You need to list the specific build hosts (OS, CPU, compiler) and target devices (architecture, board, configuration) where you tested the changes.\n    *  Provide actual testing logs from **before** and **after** the change to show the difference in behavior.\n\n**To improve this PR:**\n\n1. **Expand the Summary:** Provide a clear and detailed explanation of the changes, their purpose, and how they are implemented.\n2. **Complete the Impact section:** Analyze and describe the impact of your changes on all the listed aspects (user, build, hardware, documentation, security, compatibility).\n3. **Provide Testing Details:** Specify your build hosts and target devices, and include relevant testing logs from before and after applying your changes.\n\n**By addressing these points, your PR will be far more likely to be reviewed and merged.** \n&quot;
[2024-09-20T07:49:04Z INFO  nuttx_pr_bot] PR Comment: Comment {
        id: CommentId(
            2363052015,
        ),
        node_id: &quot;IC_kwDODZiUac6M2U_v&quot;,
        url: Url {
            scheme: &quot;https&quot;,
            cannot_be_a_base: false,
            username: &quot;&quot;,
            password: None,
            host: Some(
                Domain(
                    &quot;api.github.com&quot;,
                ),
            ),
            port: None,
            path: &quot;/repos/apache/nuttx/issues/comments/2363052015&quot;,
            query: None,
            fragment: None,
        },
        html_url: Url {
            scheme: &quot;https&quot;,
            cannot_be_a_base: false,
            username: &quot;&quot;,
            password: None,
            host: Some(
                Domain(
                    &quot;github.com&quot;,
                ),
            ),
            port: None,
            path: &quot;/apache/nuttx/pull/13553&quot;,
            query: None,
            fragment: Some(
                &quot;issuecomment-2363052015&quot;,
            ),
        },
        issue_url: Some(
            Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/repos/apache/nuttx/issues/13553&quot;,
                query: None,
                fragment: None,
            },
        ),
        body: Some(
            &quot;[**\\[Experimental Bot, please feedback here\\]**](https://github.com/search?q=repo%3Aapache%2Fnuttx+13552&amp;type=issues)\n\n__Squash The Commits:__ This PR contains 6 Commits. Please Squash the Multiple Commits into a Single Commit.\n\n\n\n**No, this PR does not meet the NuttX requirements.**\n\n**Summary:**\n\n* **Insufficient information:** The summary is too brief and lacks essential details. It doesn&#39;t explain:\n    * **Necessity:** Why is the PCI EP framework needed? What problem does it solve, or what improvement does it bring?\n    * **Functionality:** Which part of the codebase is affected? What specific PCI EP capabilities are being added?\n    * **Implementation:** How does the framework work? What changes have been made to the code?\n* **Missing references:**  Are there related NuttX issues or NuttX Apps issues/pull requests?\n\n**Impact:**\n\n* **Entirely missing:** The impact section is empty.  You must address all the points to demonstrate a thorough understanding of your changes.\n\n**Testing:**\n\n* **No details provided:** \n    *  You need to list the specific build hosts (OS, CPU, compiler) and target devices (architecture, board, configuration) where you tested the changes.\n    *  Provide actual testing logs from **before** and **after** the change to show the difference in behavior.\n\n**To improve this PR:**\n\n1. **Expand the Summary:** Provide a clear and detailed explanation of the changes, their purpose, and how they are implemented.\n2. **Complete the Impact section:** Analyze and describe the impact of your changes on all the listed aspects (user, build, hardware, documentation, security, compatibility).\n3. **Provide Testing Details:** Specify your build hosts and target devices, and include relevant testing logs from before and after applying your changes.\n\n**By addressing these points, your PR will be far more likely to be reviewed and merged.** \n&quot;,
        ),
        body_text: None,
        body_html: None,
        author_association: None,
        user: Author {
            login: &quot;nuttxpr&quot;,
            id: UserId(
                181999181,
            ),
            node_id: &quot;U_kgDOCtkWTQ&quot;,
            avatar_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;avatars.githubusercontent.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/u/181999181&quot;,
                query: Some(
                    &quot;v=4&quot;,
                ),
                fragment: None,
            },
            gravatar_id: &quot;&quot;,
            url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr&quot;,
                query: None,
                fragment: None,
            },
            html_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/nuttxpr&quot;,
                query: None,
                fragment: None,
            },
            followers_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/followers&quot;,
                query: None,
                fragment: None,
            },
            following_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/following%7B/other_user%7D&quot;,
                query: None,
                fragment: None,
            },
            gists_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/gists%7B/gist_id%7D&quot;,
                query: None,
                fragment: None,
            },
            starred_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/starred%7B/owner%7D%7B/repo%7D&quot;,
                query: None,
                fragment: None,
            },
            subscriptions_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/subscriptions&quot;,
                query: None,
                fragment: None,
            },
            organizations_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/orgs&quot;,
                query: None,
                fragment: None,
            },
            repos_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/repos&quot;,
                query: None,
                fragment: None,
            },
            events_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/events%7B/privacy%7D&quot;,
                query: None,
                fragment: None,
            },
            received_events_url: Url {
                scheme: &quot;https&quot;,
                cannot_be_a_base: false,
                username: &quot;&quot;,
                password: None,
                host: Some(
                    Domain(
                        &quot;api.github.com&quot;,
                    ),
                ),
                port: None,
                path: &quot;/users/nuttxpr/received_events&quot;,
                query: None,
                fragment: None,
            },
            type: &quot;User&quot;,
            site_admin: false,
            patch_url: None,
            email: None,
        },
        created_at: 2024-09-20T07:49:04Z,
        updated_at: Some(
            2024-09-20T07:49:04Z,
        ),
    }
[2024-09-20T07:49:05Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13553&quot;
[2024-09-20T07:50:11Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13551&quot;
[2024-09-20T07:50:11Z INFO  nuttx_pr_bot] Skipping PR with comments: 13551
[2024-09-20T07:50:16Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13550&quot;
[2024-09-20T07:50:16Z INFO  nuttx_pr_bot] Skipping PR with comments: 13550
[2024-09-20T07:50:22Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13549&quot;
[2024-09-20T07:50:22Z INFO  nuttx_pr_bot] Skipping PR with comments: 13549
[2024-09-20T07:50:27Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13546&quot;
[2024-09-20T07:50:27Z INFO  nuttx_pr_bot] Skipping PR with comments: 13546
[2024-09-20T07:50:33Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13545&quot;
[2024-09-20T07:50:33Z INFO  nuttx_pr_bot] Skipping PR with comments: 13545
[2024-09-20T07:50:38Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13541&quot;
[2024-09-20T07:50:38Z INFO  nuttx_pr_bot] Skipping PR with comments: 13541
[2024-09-20T07:50:43Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13539&quot;
[2024-09-20T07:50:43Z INFO  nuttx_pr_bot] Skipping PR with comments: 13539
[2024-09-20T07:50:49Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13538&quot;
[2024-09-20T07:50:49Z INFO  nuttx_pr_bot] Skipping PR with comments: 13538
[2024-09-20T07:50:54Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13536&quot;
[2024-09-20T07:50:54Z INFO  nuttx_pr_bot] Skipping PR with comments: 13536
[2024-09-20T07:51:00Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13530&quot;
[2024-09-20T07:51:00Z INFO  nuttx_pr_bot] Skipping PR with comments: 13530
[2024-09-20T07:51:05Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13527&quot;
[2024-09-20T07:51:05Z INFO  nuttx_pr_bot] Skipping PR with comments: 13527
[2024-09-20T07:51:11Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13526&quot;
[2024-09-20T07:51:11Z INFO  nuttx_pr_bot] Skipping PR with comments: 13526
[2024-09-20T07:51:16Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13520&quot;
[2024-09-20T07:51:16Z INFO  nuttx_pr_bot] Skipping PR with comments: 13520
[2024-09-20T07:51:22Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13519&quot;
[2024-09-20T07:51:22Z INFO  nuttx_pr_bot] Skipping PR with comments: 13519
[2024-09-20T07:51:27Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13518&quot;
[2024-09-20T07:51:27Z INFO  nuttx_pr_bot] Skipping PR with comments: 13518
[2024-09-20T07:51:33Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13507&quot;
[2024-09-20T07:51:33Z INFO  nuttx_pr_bot] Skipping PR with comments: 13507
[2024-09-20T07:51:38Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13502&quot;
[2024-09-20T07:51:38Z INFO  nuttx_pr_bot] Skipping PR with comments: 13502
[2024-09-20T07:51:43Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13498&quot;
[2024-09-20T07:51:43Z INFO  nuttx_pr_bot] Skipping PR with comments: 13498
+ sleep 600
+ (( 1 ))
+ (( 1 ))
+ cargo run --owner apache --repo nuttx
warning: use of deprecated method `octocrab::pulls::PullRequestHandler::&lt;&#39;octo&gt;::pull_number`: specific PR builder transitioned to pr_review_actions, reply_to_comment, reply_to_comment
   --&gt; src/main.rs:141:10
    |
141 |         .pull_number(pr_id)
    |          ^^^^^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default

warning: `nuttx-pr-bot` (bin &quot;nuttx-pr-bot&quot;) generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.17s
     Running `target/debug/nuttx-pr-bot`
[2024-09-20T08:01:50Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13555&quot;
[2024-09-20T08:01:50Z INFO  nuttx_pr_bot] Skipping PR Size XS: 13555
[2024-09-20T08:01:56Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13554&quot;
[2024-09-20T08:01:56Z INFO  nuttx_pr_bot] Skipping PR with comments: 13554
[2024-09-20T08:02:01Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13553&quot;
[2024-09-20T08:02:01Z INFO  nuttx_pr_bot] Skipping PR with comments: 13553
[2024-09-20T08:02:06Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13551&quot;
[2024-09-20T08:02:06Z INFO  nuttx_pr_bot] Skipping PR with comments: 13551
[2024-09-20T08:02:12Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13550&quot;
[2024-09-20T08:02:12Z INFO  nuttx_pr_bot] Skipping PR with comments: 13550
[2024-09-20T08:02:17Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13549&quot;
[2024-09-20T08:02:17Z INFO  nuttx_pr_bot] Skipping PR with comments: 13549
[2024-09-20T08:02:23Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13546&quot;
[2024-09-20T08:02:23Z INFO  nuttx_pr_bot] Skipping PR with comments: 13546
[2024-09-20T08:02:28Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13545&quot;
[2024-09-20T08:02:28Z INFO  nuttx_pr_bot] Skipping PR with comments: 13545
[2024-09-20T08:02:34Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13541&quot;
[2024-09-20T08:02:34Z INFO  nuttx_pr_bot] Skipping PR with comments: 13541
[2024-09-20T08:02:39Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13539&quot;
[2024-09-20T08:02:39Z INFO  nuttx_pr_bot] Skipping PR with comments: 13539
[2024-09-20T08:02:45Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13538&quot;
[2024-09-20T08:02:45Z INFO  nuttx_pr_bot] Skipping PR with comments: 13538
[2024-09-20T08:02:50Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13536&quot;
[2024-09-20T08:02:50Z INFO  nuttx_pr_bot] Skipping PR with comments: 13536
[2024-09-20T08:02:56Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13530&quot;
[2024-09-20T08:02:56Z INFO  nuttx_pr_bot] Skipping PR with comments: 13530
[2024-09-20T08:03:02Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13527&quot;
[2024-09-20T08:03:02Z INFO  nuttx_pr_bot] Skipping PR with comments: 13527
[2024-09-20T08:03:07Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13526&quot;
[2024-09-20T08:03:07Z INFO  nuttx_pr_bot] Skipping PR with comments: 13526
[2024-09-20T08:03:13Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13520&quot;
[2024-09-20T08:03:13Z INFO  nuttx_pr_bot] Skipping PR with comments: 13520
[2024-09-20T08:03:18Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13519&quot;
[2024-09-20T08:03:18Z INFO  nuttx_pr_bot] Skipping PR with comments: 13519
[2024-09-20T08:03:24Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13518&quot;
[2024-09-20T08:03:24Z INFO  nuttx_pr_bot] Skipping PR with comments: 13518
[2024-09-20T08:03:29Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13507&quot;
[2024-09-20T08:03:29Z INFO  nuttx_pr_bot] Skipping PR with comments: 13507
[2024-09-20T08:03:35Z INFO  nuttx_pr_bot] &quot;https://api.github.com/repos/apache/nuttx/pulls/13502&quot;
[2024-09-20T08:03:35Z INFO  nuttx_pr_bot] Skipping PR with comments: 13502
+ sleep 600  
</code></pre></div><h1 id="whats-next"><a class="doc-anchor" href="#whats-next">¬ß</a>9 What‚Äôs Next</h1>
<p>TODO</p>
<p>Many Thanks to my <a href="https://github.com/sponsors/lupyuen"><strong>GitHub Sponsors</strong></a> (and the awesome NuttX Community) for supporting my work! This article wouldn‚Äôt have been possible without your support.</p>
<ul>
<li>
<p><a href="https://github.com/sponsors/lupyuen"><strong>Sponsor me a coffee</strong></a></p>
</li>
<li>
<p><a href="https://github.com/lupyuen/nuttx-sg2000"><strong>My Current Project: ‚ÄúApache NuttX RTOS for Sophgo SG2000‚Äù</strong></a></p>
</li>
<li>
<p><a href="https://github.com/lupyuen/nuttx-ox64"><strong>My Other Project: ‚ÄúNuttX for Ox64 BL808‚Äù</strong></a></p>
</li>
<li>
<p><a href="https://github.com/lupyuen/nuttx-star64"><strong>Older Project: ‚ÄúNuttX for Star64 JH7110‚Äù</strong></a></p>
</li>
<li>
<p><a href="https://github.com/lupyuen/pinephone-nuttx"><strong>Olderer Project: ‚ÄúNuttX for PinePhone‚Äù</strong></a></p>
</li>
<li>
<p><a href="https://lupyuen.github.io"><strong>Check out my articles</strong></a></p>
</li>
<li>
<p><a href="https://lupyuen.github.io/rss.xml"><strong>RSS Feed</strong></a></p>
</li>
</ul>
<p><em>Got a question, comment or suggestion? Create an Issue or submit a Pull Request here‚Ä¶</em></p>
<p><a href="https://github.com/lupyuen/lupyuen.github.io/blob/master/src/llm.md"><strong>lupyuen.github.io/src/llm.md</strong></a></p>

    
    <!-- Begin scripts/rustdoc-after.html: Post-HTML for Custom Markdown files processed by rustdoc, like chip8.md -->

    <!-- Begin Theme Picker and Prism Theme -->
    <script src="../theme.js"></script>
    <script src="../prism.js"></script>
    <!-- Theme Picker and Prism Theme -->

    <!-- End scripts/rustdoc-after.html -->
    

</body>
</html>